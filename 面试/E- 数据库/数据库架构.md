

### 常见问题 https://zhuanlan.zhihu.com/p/23713529

+   什么是存储过程？有哪些优缺点？



![常见面试题整理--数据库篇（每位开发者必备）](E:\git\typora\LeetCode刷题\images\sql.png)





#### 数据库常见面试题

+   什么是**事务**，**事务的四大特性**，以及**数据库隔离级别** https://www.cnblogs.com/wyaokai/p/10921323.html

    事务（Transaction）是并发控制的基本单位。所谓的事务，是一个操作序列，要么同时执行，要么都不执行，他是一个不可分割的基本单位。事务是数据库维持数据一致性的基本单位。

    A（原子性）：一个事务要么全部成功，要么全部失败回滚。

    C（consistency，一致性）事务在执行前后，应该保证状态的一致性。

    I（Isolation，隔离性）在并发环境中，事务是相互隔离的，一个事务的执行不能被其他事务干扰。定义了四种隔离级别，读未提交（可以获得中间值，脏读取），授权读取（只可以获得已经提交的数据），可重复读（读取数据时，值和事务开始时刻都是一致的，可能出现幻影数据），串行化（只能串行执行，不能并发执行）

    D（持久性，Durability）一旦事务提交，那么它对数据库中的对应数据状态变更就会永久保存到数据库中。

    **脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据**

    **不可重复读：事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。**

    **幻读：系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。**

    **不可重复读的和幻读很容易混淆，不可重复读侧重于修改，幻读侧重于新增或删除。解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表**

    ![image-20210301142450507](E:\git\typora\LeetCode刷题\images\sql2)

+   MySql两种存储引擎InnoDB和MyISAM，以及区别 https://www.cnblogs.com/rgever/p/9736374.html

    MyISAM：不支持事务，但操作是原子性的；不支持外键，支持表锁，每次锁住整张表；包含三个文件，索引文件，表结构文件以及数据文件；直接存储表的总行数；**采用非聚集索引**。

    Innodb：支持事务，包括数据库的四种隔离级别，包含事务，回滚，崩溃修复能力的事务安全型表；支持写并发；不存储总行数；**采用聚集索引**，**维持B+树结构**

    


+   索引是什么？包括哪些类型？🚀 索引的底层实现？ [参考一](https://www.cnblogs.com/s-b-b/p/8334593.html)    [参考二](https://kb.cnblogs.com/page/45712/)

    索引是对数据库表中一个或多个列的值进行排序的结构，是帮助MySql高效获取数据的数据结构

    可以分为两大类：聚集索引和非聚集索引，聚集索引表示数据行存储的物理位置和列值的逻辑顺序相同；一个表中只能由一个聚集索引。非聚集索引表示索引的逻辑顺序与磁盘上的物理存储顺序不同，可以由多个非聚集索引。

    聚集索引：主键索引；非聚集索引：普通索引，唯一索引，以及全文索引

    Mysql各种索引区别：
    普通索引：最基本的索引，没有任何限制
    唯一索引：与"普通索引"类似，不同的就是：索引列的值必须唯一，但允许有空值。
    主键索引：它 是一种特殊的唯一索引，不允许有空值。 
    全文索引：仅可用于 MyISAM 表，针对较大的数据，生成全文索引很耗时好空间。
    组合索引：为了更多的提高mysql效率可建立组合索引，遵循”最左前缀“原则。
    
    
    
+ 什么是存储过程？有哪些优缺点

    存储过程是一些预编译的SQL语句，他是一些T-SQL语句组成的代码快，这些代码块像一个方法一样实现一些功能，然后对这个方法起个名字，然后调用。

    优点：执行效率高；在网络通信中，降低通信量；保证数据安全。

    ```python
    create Procedure GetUserAccountRe1
    @UserName nchar(20),
    @UserID int output
    as
    if(@UserName>5)
    select @UserID=COUNT(*) from UserAccount where UserID>25
    else
    set @UserID=1000
    return @@rowcount
    go
    
    exec GetUserAccountRe1 '7',null
    ```



+   数据库有哪些锁？[Ref1](https://blog.csdn.net/C_J33/article/details/79487941)   [Ref2](https://blog.csdn.net/weixin_39651041/article/details/79985715)

    ![img](..\..\LeetCode刷题\images\sql3)

    乐观锁：通过版本号或者时间戳

    悲观锁：包括表锁，行锁，页锁

    行锁细分：共享锁，排他锁，更新锁，意向锁

    共享锁：也就是**读锁**

    排他锁：也就是**写锁**

    意向锁：是InnoDB自动加的，不需要用户干预。

    表锁细分：共享锁，排他锁，意向锁



+   什么是视图？

    视图是一种虚拟的表，具有和物理表相同的功能。可以对视图进行增改查操作，对视图的操作不会影响基本表。

    优点：1.简化用户操作 2.增加安全性 3. 提供数据上的逻辑独立性 

    缺点：性能降低；修改限制。



+    关系型数据库和非关系型数据库区别 [Ref](https://www.cnblogs.com/jeakeven/p/5402095.html)

     关系就是一张二维表



+   数据库中join的inner join(内连接）、left join(左连接)、right join（右连接）、full join（全连接）

    inner join, 在两张表进行连接查询时，只保留两张表中完全匹配的结果集。

    left join, 在两张表进行连接查询时，会返回左表所有的行，即使在右表中没有匹配的记录

    right join, 在两张表进行连接查询时，会返回右表所有的行，即使在左表中没有匹配的记录。

    full join, 在两张表进行连接查询时，返回左表和右表中所有没有匹配的行。

![img](E:\git\typora\LeetCode刷题\images\sql4.png)



🚀 数据库范式是什么