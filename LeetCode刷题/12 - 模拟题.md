#### LCP 03. æœºå™¨äººå¤§å†’é™© ğŸ‰

![image-20210822143013418](images/image-20210822143013418.png)

```python
class Solution:
    def robot(self, command: str, obstacles: List[List[int]], x: int, y: int) -> bool:
        directions = {"R":[1,0],"U":[0,1]}
        counter = collections.Counter(command)
        size = len(command)
        
        # ç¬¬ä¸€éï¼Œå…ˆéå†æ‰€æœ‰çš„éšœç¢ï¼Œå¹¶å°†æ‰€æœ‰çš„éšœç¢ç¼©å‡åˆ° `ä¸€ä¸ªéå†çš„èŒƒå›´å†…`
        obstacle_set = set()
        for obstacle in obstacles:
            if obstacle[0] > x or obstacle[1] > y: continue # è¶…è¿‡ç›®æ ‡å€¼çš„éšœç¢ä¸äºˆè€ƒè™‘
            r = min(obstacle[0]//counter["R"], obstacle[1]//counter["U"])
            obstacle[0] = obstacle[0]-r*counter["R"]
            obstacle[1] = obstacle[1]-r*counter["U"]
            obstacle_set.add((obstacle[0],obstacle[1]))

        # å…ˆèµ°ä¸€écommandï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å¯èƒ½ç¢°åˆ°éšœç¢
        cur = (0,0)
        if cur in obstacle_set: return False
        for i in range(size):
            cmd = command[i]
            d = directions[cmd]
            nxt_x = cur[0] + d[0]
            nxt_y = cur[1] + d[1]
            cur = (nxt_x,nxt_y)
            if cur in obstacle_set: return False

        # ä¸è‚¯èƒ½å‘ç”Ÿéšœç¢ï¼Œå°†ç›®æ ‡å€¼æ˜ å°„åˆ° `ä¸€ä¸ªéå†çš„èŒƒå›´å†…`
        if x >= counter["R"] and y >= counter["U"]:
            r = min(x // counter["R"], y//counter["U"])
            x,y = x-r*counter["R"],y-r*counter["U"]
            
        cur = (0,0)
        for idx in range(size):
            # å¦‚æœåˆ°è¾¾ç›®æ ‡å€¼,ç»“æŸ
            if cur[0] == x and cur[1] == y: return True
            # è¯»å–å‘½ä»¤
            cmd = command[idx]
            d = directions[cmd]
            # æ›´æ–°æ–¹å‘
            nxt_x = cur[0] + d[0]
            nxt_y = cur[1] + d[1]
            cur = (nxt_x,nxt_y)
            # å¦‚æœè¶…è¿‡èŒƒå›´ï¼Œç»ˆæ­¢
            if nxt_x > x or nxt_y > y: break
        return cur[0] == x and cur[1] == y
```





#### 319. ç¯æ³¡å¼€å…³

>   <img src="images/image-20210826123939234.png" alt="image-20210826123939234" style="zoom: 67%;" />
>
>   <img src="images/image-20210826123949049.png" alt="image-20210826123949049" style="zoom: 60%;" />
>
>   æ€è·¯ï¼šå…ˆæŒ‰ç…§æ¨¡æ‹Ÿæ³•è¿›è¡Œæ¨¡æ‹Ÿï¼Œå¾—åˆ°ä¸€å®šçš„æ•°æ®ï¼Œç„¶åå°è¯•å½’çº³ç»“æœï¼Œæ¯”å¦‚å°†å‰`30` ä¸ªç»“æœæ‰“å°ï¼š
>
>   ```text
>   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
>   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
>   [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]
>   [1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1]
>   [1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1]
>   [1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0]
>   [1, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]
>   [1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
>   ```
>
>   æœ€åä¸€è¡Œæœ‰ç€æ˜æ˜¾çš„è§„å¾‹ï¼š
>
>   `[1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]`
>
>   `0` çš„ä¸ªæ•°è¡¨ç°ä¸ºï¼š2ï¼Œ4ï¼Œ6ï¼Œ8ï¼Œ10è¿™æ ·çš„é€’å¢é¡ºåºã€‚

```python
class Solution:
    def bulbSwitch(self, n: int) -> int:
        if n == 0: return 0
        left = 1
        right = n
        while left <= right:
            mid = left + (right-left) // 2
            val = mid*(mid+2)
            if val == n: right = mid - 1
            elif val < n: left = mid + 1
            else: right = mid - 1
        return left
```



#### 799. é¦™æ§Ÿå¡” ğŸ‰

>   ![image-20210826170410027](images/image-20210826170410027.png)

```python
class Solution:
    def champagneTower(self, poured: int, query_row: int, query_glass: int) -> float:
        """ å…ˆå‡è®¾å°†æ‰€æœ‰çš„é¦™æ§Ÿä¸€è‚¡è„‘å…¨éƒ¨æ”¾åˆ°æœ€ä¸Šé¢çš„æ¯å­ä¸­ """
        dp = [[0]*(query_row+2) for i in range(query_row+2)]
        dp[0][0] = poured
        for i in range(0,query_row+1):
            for j in range(0,i+1):
                if dp[i][j] > 1:                    
                    dp[i+1][j] += (dp[i][j]-1) / 2
                    dp[i+1][j+1] += (dp[i][j]-1) / 2
                    dp[i][j] = 1
        return dp[query_row][query_glass]
```





#### 735. è¡Œæ˜Ÿç¢°æ’ ğŸ‰ğŸ‰

>   ![image-20210826173105538](images/image-20210826173105538.png)
>
>   æ€è·¯ï¼šç”¨æ ˆæ¥æ¨¡æ‹Ÿï¼Œè¿™ä¸€é¢˜åœ¨ä¿è¯ç­”æ¡ˆæ­£ç¡®æ€§æ—¶ï¼Œéœ€è¦æ„è¯†åˆ°ç¢°æ’çš„å•è°ƒæ€§ï¼Œä¹Ÿå°±æ˜¯æœ€åçš„ç»“æœä¸€å®šæ˜¯ï¼š
>
>   +   å·¦è¾¹ä¸ºè´Ÿæ•°ï¼Œå³è¾¹ä¸ºæ­£æ•°
>   +   å…¨éƒ¨ä¸ºè´Ÿæ•°
>   +   å…¨éƒ¨ä¸ºæ­£æ•°
>
>   ä¸ä¼šå‡ºç°äº¤å‰æƒ…å†µã€‚

```python
class Solution:
    def asteroidCollision(self, asteroids: List[int]) -> List[int]:
        stack = []
        n = len(asteroids)
        ans = []
        for i in range(n):
            if asteroids[i] > 0:
                stack.append(asteroids[i])
            else:
                if not stack:
                    stack.append(asteroids[i])
                else:
                    while stack and stack[-1] > 0 and stack[-1] + asteroids[i] < 0:
                        stack.pop()    
                    if not stack or stack[-1] < 0:
                        stack.append(asteroids[i])
                    elif stack[-1] + asteroids[i] == 0:
                        stack.pop()
        return stack
```





#### 495. æè«æ”»å‡»

>   ![image-20210826180505022](images/image-20210826180505022.png)
>
>   ç±»ä¼¼äº`è·³è·ƒæ¸¸æˆ` é‚£ç§æ€è·¯ï¼Œç»´æŠ¤`ä¸­æ¯’çš„æ—¶é—´` å’Œ `ä¸‹ä¸€ä¸ªæ—¶é—´åºåˆ—` çš„å¤§å°å…³ç³»ã€‚

```python
class Solution:
    def findPoisonedDuration(self, timeSeries: List[int], duration: int) -> int:
        ans = 0
        n = len(timeSeries)
        cur = -1
        for i in range(n):
            if cur >= timeSeries[i]:
                nxt = timeSeries[i] + (duration-1)
                ans += (nxt-cur)
                cur = nxt
            else:
                cur = timeSeries[i] + (duration-1)
                ans += duration
        return ans
```



#### 874. æ¨¡æ‹Ÿè¡Œèµ°æœºå™¨äºº ğŸ‰

>   ![image-20210827110222919](images/image-20210827110222919.png)
>
>   æ€è·¯ï¼š
>
>   +   ç”¨transferæ¥ç»´æŠ¤çŠ¶æ€è½¬æ¢å…³ç³»
>   +   ç”¨`obstacle_x` æ¥ç»´æŠ¤æ¯è¡Œæˆ–è€…æ¯åˆ—ä¸Šå¯èƒ½å­˜åœ¨çš„éšœç¢ç‰©
>   +   è¿™é‡Œè®¡ç®—çš„æ˜¯`è·ç¦»åŸç‚¹çš„æœ€å¤§å€¼`ï¼Œè€Œä¸æ˜¯æœ€åçš„å€¼ã€‚

```python
class Solution:
    def robotSim(self, commands: List[int], obstacles: List[List[int]]) -> int:
        obstacle_set = set()
        obstacle_x = collections.defaultdict(list)
        obstacle_y = collections.defaultdict(list)

        for obstacle in obstacles:
            obstacle_set.add((obstacle[0],obstacle[1]))
            obstacle_x[obstacle[0]].append(obstacle[1])
            obstacle_y[obstacle[1]].append(obstacle[0])
        
        directions = [[1,0],[-1,0],[0,1],[0,-1]]
        transfer = {
            2:{-1:0,-2:1}, # å½“å‰æ–¹å‘å‘åŒ—ï¼Œå·¦è½¬å’Œå³è½¬
            3:{-1:1,-2:0}, # å½“å‰æ–¹å‘å‘å—ï¼Œå·¦è½¬å’Œå³è½¬
            0:{-1:3,-2:2}, # å½“å‰æ–¹å‘å‘ä¸œï¼Œå·¦è½¬å’Œå³è½¬
            1:{-1:2,-2:3}, # å½“å‰æ–¹å‘å‘è¥¿ï¼Œå·¦è½¬å’Œå³è½¬
        }

        cur = (0,0)
        ans = 0
        d = 2
        for command in commands:
            if command < 0:
                d = transfer[d][command]
            else:
                x,y = cur
                if d in {0,1}: # ä¸œè¥¿æ–¹å‘ï¼Œåˆ¤æ–­y
                    val = obstacle_y.get(y,None)
                    if val is None:
                        x = x + directions[d][0]*command
                    else:
                        for i in range(1,command+1):
                            x += directions[d][0]
                            if (x,y) in obstacle_set:
                                x -= directions[d][0]
                                break
                else: # å—åŒ—æ–¹å‘ï¼Œåˆ¤æ–­y
                    val = obstacle_x.get(x,None)
                    if val is None:
                        y = y + directions[d][1]*command
                    else:
                        for i in range(1,command+1):
                            y += directions[d][1]
                            if (x,y) in obstacle_set:
                                y -= directions[d][1]
                                break      
                cur = (x,y)
                ans = max(ans,x**2+y**2)
        return ans
```



#### [860. æŸ æª¬æ°´æ‰¾é›¶](https://leetcode-cn.com/problems/lemonade-change/)

>   ![image-20210827111520989](images/image-20210827111520989.png)

```python
class Solution:
    def lemonadeChange(self, bills: List[int]) -> bool:
        counter = collections.defaultdict(int)
        n = len(bills)
        
        for i in range(n):
            val = bills[i]-5 # è¡¨ç¤ºåº”è¯¥æ‰¾ç»™é¡¾å®¢çš„é’±
            if val != 0:
                for money in [20,15,10,5]:
                    if money <= val:
                        freq = min(val // money,counter[money])
                        val = val - money*freq
                        counter[money] -= freq
                    if val == 0: break
                # valä¸ç­‰äº0è¡¨ç¤ºæ²¡æ³•å…¨éƒ¨æ‰¾ç»™ç”¨æˆ·ï¼Œç»“æŸ
                if val > 0: return False
            counter[bills[i]] += 1
        return True
```



#### [1222. å¯ä»¥æ”»å‡»å›½ç‹çš„çš‡å](https://leetcode-cn.com/problems/queens-that-can-attack-the-king/)

>   ![image-20210827112638205](images/image-20210827112638205.png)
>
>   ![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/10/13/untitled-diagram-2.jpg)

```python
class Solution:
    def queensAttacktheKing(self, queens: List[List[int]], king: List[int]) -> List[List[int]]:
        queens_set = set()
        ans = []
        for queen in queens:
            queens_set.add((queen[0],queen[1]))
        
        n = 8
        directions = [[0,1],[0,-1],[1,0],[-1,0],[1,1],[-1,-1],[1,-1],[-1,1]]

        for i in range(len(directions)):
            x,y = king
            while x >= 0 and y >= 0 and x < n and y < n:
                x += directions[i][0]
                y += directions[i][1]
                if (x,y) in queens_set:
                    ans.append([x,y])
                    break
        return ans
```





#### [48. æ—‹è½¬å›¾åƒ ğŸ‰](https://leetcode-cn.com/problems/rotate-image/)

>   ![image-20210827151528653](images/image-20210827151528653.png)

ä¸¤ç§æ€è·¯ï¼Œä¸€ç§æ˜¯æŒ‰ç…§å—æ¥æ—‹è½¬ï¼Œä¸€ç§æ˜¯æŒ‰ç…§å…ƒç´ æ—‹è½¬ã€‚

+   æŒ‰å—å¡«å……

![image-20210827151913243](images/image-20210827151913243.png)

+   æŒ‰å…ƒç´ å¡«å……

    ![image-20210827152142736](images/image-20210827152142736-1630048904214.png)

```python
# æŒ‰å—å¡«å……
class Solution:
    def rotate(self, matrix: List[List[int]]) -> None:
        """
        Do not return anything, modify matrix in-place instead.
        """
        N = len(matrix)
        if N == 0: return
        for i in range(N//2):
            for j in range((N+1)//2):
                tmp = matrix[i][j]
                matrix[i][j] = matrix[N-j-1][i]
                matrix[N-j-1][i] = matrix[N-i-1][N-j-1]
                matrix[N-i-1][N-j-1] = matrix[j][N-i-1]
                matrix[j][N-i-1] = tmp

# æŒ‰å…ƒç´ å¡«å……
class Solution:
    def rotate(self, matrix: List[List[int]]) -> None:
        """
        Do not return anything, modify matrix in-place instead.
        """
        n = len(matrix)
        for x in range(0,n//2):
            for y in range(x,n-x-1):
                matrix[y][n-1-x],matrix[n-1-x][n-1-y],matrix[n-1-y][x],matrix[x][y] =\
                    matrix[x][y],matrix[y][n-1-x],matrix[n-1-x][n-1-y],matrix[n-1-y][x]

```



#### [946. éªŒè¯æ ˆåºåˆ—](https://leetcode-cn.com/problems/validate-stack-sequences/)

>   ![image-20210827123756347](images/image-20210827123756347.png)
>
>   æ€è·¯ï¼šæ•°æ®æŒ‰ç…§å…ˆå‹å…¥åå¼¹å‡ºçš„é¡ºåºè¿›è¡Œå¤„ç†ï¼Œ

```python
class Solution:
    def validateStackSequences(self, pushed: List[int], popped: List[int]) -> bool:
        stack = []
        n = len(pushed)
        j = 0
        for i in range(n):
            stack.append(pushed[i])
            while stack and stack[-1] == popped[j]:
                j += 1
                stack.pop()
        return not stack
```



#### [445. ä¸¤æ•°ç›¸åŠ  II](https://leetcode-cn.com/problems/add-two-numbers-ii/)

```python
class Solution:
    def addTwoNumbers(self, l1: ListNode, l2: ListNode) -> ListNode:
        def reverse(head,prev):
            if not head: return prev
            node = head.next
            head.next = prev
            return reverse(node,head)
        
        l1 = reverse(l1,None)
        l2 = reverse(l2,None)

        dummy = ListNode(-1)
        p = dummy
        p1,p2 = l1,l2
        carry = 0
        while p1 and p2:
            cur = p1.val + p2.val + carry
            p1.val = cur % 10
            carry = cur // 10
            p.next = p1
            p = p.next
            p1 = p1.next
            p2 = p2.next
        
        while p1:
            cur = p1.val + carry
            p1.val = cur % 10
            carry = cur // 10
            p.next = p1
            p = p.next
            p1 = p1.next
        
        while p2:
            cur = p2.val + carry
            p2.val = cur % 10
            carry = cur // 10
            p.next = p2
            p = p.next
            p2 = p2.next
        
        if carry > 0:
            p.next = ListNode(carry)
        
        head = dummy.next
        dummy.next = None
        return reverse(head,None)
```

