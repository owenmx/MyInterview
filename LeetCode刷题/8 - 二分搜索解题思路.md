[TOC]

## 1. äºŒåˆ†æ³•åŸºç¡€çŸ¥è¯†

#### 1.1  å‰æä»‹ç»

ä½ æ˜¯ä»€ä¹ˆæ—¶å€™æ¥è§¦åˆ°äºŒåˆ†æ³•çš„ï¼Ÿå­¦ä¹ æ•°æ®ç»“æ„çš„æ—¶å€™ï¼Ÿå…¶å®å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½åœ¨ä½¿ç”¨äºŒåˆ†æ³•ï¼Œè®°å¾—ä»¥å‰ä¸­å¤®äºŒå¥—ä¸€ä¸ªä¸»æŒäººé«˜åšä¸»æŒè¿‡ä¸€ä¸ªçŒœç‰©å“ä»·æ ¼çš„èŠ‚ç›®ï¼Œæ¯æ¬¡çŒœä»·æ ¼çš„æ—¶å€™éƒ½ä¼šå–Š**é«˜äº†æˆ–è€…ä½äº†**ï¼Œç›´åˆ°çŒœå‡ºä»·æ ¼ã€‚

ç„¶åä¸­å­¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨è¿‘ä¼¼è§£ä¸€ä¸ªç­‰å¼ $f(x)=0$ çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå…ˆç¡®å®š $x$ çš„**èŒƒå›´** $[a,b]$ã€‚æ¯æ¬¡å…ˆé€‰å–ä¸­é—´ç‚¹$\text{mid}=\frac{a+b}{2}$ï¼Œç„¶ååˆ¤æ–­ $f(a)\times f(\text{mid})>0$ è¿˜æ˜¯ $f(\text{mid})\times f(b)>0$ï¼Œæ¥ç€è°ƒæ•´ $a,b$ çš„èŒƒå›´ã€‚

![image-20210731151808701](images/image-20210731151808701-1627715889969.png)

æœ€åï¼Œåœ¨å­¦ä¹ æ•°æ®ç»“æ„çš„æ—¶å€™ï¼Œåœ¨ä¸€ä¸ª**æœ‰åºæ•°ç»„**ä¸­æŸ¥æ‰¾æŸä¸€ä¸ªæ•°å­—ï¼Œä¹Ÿæ˜¯å…ˆç¡®å®šèŒƒå›´ï¼Œç„¶åé€‰å–ä¸­é—´ç‚¹ï¼Œæ¥ç€è°ƒæ•´èŒƒå›´ç›´åˆ°ç»“æŸã€‚

ä»ä¸Šé¢ä¸‰ä¸ªä¾‹å­ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨äºŒåˆ†æ³•çš„ä¸¤è¦ç´ ï¼Œ**èŒƒå›´**ã€**äºŒæ®µæ€§ï¼ˆå•è°ƒæ€§ï¼‰**ã€‚

åœ¨ä½¿ç”¨äºŒåˆ†æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯ç›®æ ‡æ•°æ®é›†åˆåœ¨**æŒ‡å®šçš„èŒƒå›´å†…å…·æœ‰äºŒæ®µæ€§ï¼ˆå•è°ƒæ€§ï¼‰**ï¼Œæ¯”å¦‚åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä»¥çŒœå‡ºçš„ä»·æ ¼ä½œä¸ºåˆ†å‰²ç‚¹ï¼Œä¸€æ®µåŒºåŸŸè¦ä¹ˆå¤§äºä»·æ ¼è¦ä¹ˆå°äºä»·æ ¼ï¼›ç¬¬äºŒä¸ªä¾‹å­ï¼Œä»¥`mid`ä½œä¸ºåˆ†ç•Œç‚¹ï¼Œä¸€æ®µåŒºåŸŸè¦ä¹ˆéƒ½æ»¡è¶³è¾¹ç•Œç‚¹ä¹˜ç§¯å¤§äº0ï¼Œè¦ä¹ˆå°äºé›¶ã€‚

#### 1.2 äºŒåˆ†æ³•é€‚ç”¨æ¡ä»¶

äºŒåˆ†æ³•æ˜¯é€‚ç”¨äºè§£å†³å…·æœ‰`äºŒæ®µæ€§`(å•è°ƒæ€§)çš„é—®é¢˜çš„æ–¹æ³•ï¼Œé€šå¸¸è¡¨ç°ä¸ºæ±‚è§£æ»¡è¶³æŸä¸€æ¡ä»¶çš„æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼é—®é¢˜ã€‚

`äºŒæ®µæ€§ï¼š`å¯¹æŸä¸€èŒƒå›´å†…çš„æ•°æ®ï¼Œå­˜åœ¨ä¸€ä¸ªä¸´ç•Œç‚¹ï¼Œä½¿å¾—ä¸´ç•Œç‚¹æŸä¸€ä¾§çš„æ‰€æœ‰æ•°æ®éƒ½æ»¡è¶³æŸä¸€æ€§è´¨ï¼Œå¦ä¸€ä¾§çš„æ‰€æœ‰æ•°æ®éƒ½ä¸æ»¡è¶³è¿™ä¸€æ€§è´¨ã€‚

`ã€ŒäºŒåˆ†ã€`çš„æœ¬è´¨æ˜¯äºŒæ®µæ€§ï¼Œå¹¶éå•è°ƒæ€§ã€‚åªè¦ä¸€æ®µæ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå¦å¤–ä¸€æ®µä¸æ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå°±å¯ä»¥ç”¨`ã€ŒäºŒåˆ†ã€`ã€‚

å› æ­¤ï¼Œ`bisect_left`æ‰¾åˆ°çš„æ˜¯å¤§äºç­‰äº`target`çš„ä¸‹æ ‡ï¼›`bisect_right`æ‰¾åˆ°çš„æ˜¯å¤§äº`target`çš„ä¸‹æ ‡



<img src="images/image-20210730173138520.png" alt="image-20210730173138520" style="zoom:150%;" />

#### 1.3 äºŒåˆ†æ³•çš„ä¸‰ç§å†™æ³•

```python
# 1 å·¦é—­å³é—­å†™æ³•
while (low <= high) {
    long mid = low + (high - low) / 2;
    long r = mid * mid;
    if (r > x) high = mid - 1;
    else if (r < x) low = mid + 1;
    else return (int) mid;
}
return (int) low - 1;

# 2 å·¦é—­å³å¼€å†™æ³•
while (low < high) {
    long mid = low + (high - low) / 2;
    long r = mid * mid;
    if (r > x) high = mid;
    else if (r < x) low = mid + 1;
    else return (int) mid;
}
return (int) low - 1;

# 2 å·¦é—­å³å¼€å†™æ³•ï¼Œmidå‘ä¸Šå–æ•´å†™æ³•
while (low < high) {
    long mid = low + (high - low + 1) / 2;
    long r = mid * mid;
    if (r > x) high = mid - 1;
    else if (r < x) low = mid;
    else return (int) mid;
}
return (int) low;
```



#### 1.4 äºŒåˆ†æ³•çš„æ‹“å±•

é€šå¸¸æˆ‘ä»¬å°† `mid` å®šä¹‰ä¸ºæ•°ç»„çš„ä¸‹æ ‡ï¼Œè¿™ç§å®šä¹‰å¯ä»¥è¢«çœ‹æˆæ˜¯æ ‡å‡†çš„äºŒåˆ†æ³•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨`äºŒæ®µæ€§`ï¼Œå°† `mid` å®šä¹‰ä¸ºæŸç§èµ„æºçš„å€¼ï¼Œæ¯”å¦‚åœ¨  `Lintcode-437` ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ `mid` ä¸ºæœ€å¤šçš„`pages`ã€‚

è¿™ç§æ€è·¯ä¸‹ï¼ŒåŸºæœ¬çš„æµç¨‹ä»ç„¶æ˜¯å…ˆç¡®å®šèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½çš„è§£çš„èŒƒå›´ã€‚æ¯”å¦‚`Lintcode-437`ä¸­ï¼Œéœ€è¦çš„æœ€å°‘`page`æ˜¯æ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ ï¼Œéœ€è¦æœ€å¤šçš„`page` æ˜¯æ•°å­—ä¹‹å’Œã€‚





[æweiweiäºŒåˆ†æ³•æ€»ç»“](https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/)

![image-20210520114644984](images/image-20210520114644984-1621482406949.png)



## 2.  é¢˜é›†

#### 2.1 é¢˜å‹ä¸€ï¼š`å®šä¹‰åŸŸä¸Šçš„äºŒåˆ†æŸ¥æ‰¾`

ä¸€èˆ¬è€Œè¨€æ•°ç»„éƒ½æ˜¯`æœ‰åº`çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯åŠæœ‰åºçš„ï¼ˆ`æ—‹è½¬æœ‰åºæ•°ç»„` æˆ–è€… `å±±è„‰æ•°ç»„` ï¼‰

##### 33 æœç´¢æ—‹è½¬æ’åºæ•°ç»„

>   ![image-20210730200155415](images/image-20210730200155415.png)
>
>   ä¸€å®šè¦åˆ©ç”¨äºŒåˆ†åœºæ™¯ä¸‹çš„ `äºŒæ®µæ€§` å°†æ•°æ®åˆ’åˆ†ç¨‹å¤šä¸ªéƒ¨åˆ†ã€‚

```python
class Solution:
    def search(self, nums: List[int], target: int) -> int:
        """
        å…ƒç´ äº’ä¸ç›¸åŒ
        """
        n = len(nums)
        left = 0
        right = n - 1

        if nums[left] <= target:
            # targetåœ¨å·¦è¾¹
            while left <= right:
                mid = left + (right-left) // 2
                if nums[mid] == target:
                    return mid

                if nums[mid] < nums[left]:
                    right = mid - 1
                else:
                    if nums[mid] > target:
                        right = mid - 1
                    else:
                        left = mid + 1
        else:
            while left <= right:
                mid = left + (right-left) // 2 
                if nums[mid] == target:
                    return mid

                if nums[mid] > nums[right]:
                    left = mid + 1
                else:
                    if nums[mid] < target:
                        left = mid + 1
                    else:
                        right = mid - 1
            
        return -1
```

##### 34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®

>   ![image-20210823165705544](images/image-20210823165705544.png)

```python
class Solution:
    def searchRange(self, nums: List[int], target: int) -> List[int]:
        n = len(nums)
        left,right = 0,n-1
        flag = True
        while left <= right:
            mid = left + (right-left) // 2
            if nums[mid] <= target:
                left = mid + 1
            else:
                right = mid - 1
        if right < 0 or nums[right] != target: return [-1,-1]
        else:
            i = right
            while i >= 0 and nums[i] == target: i -= 1
            return [i+1,right]
```

##### 74. æœç´¢äºŒç»´çŸ©é˜µ

>   ![image-20210731154340089](images/image-20210731154340089.png)
>
>   æ€è·¯ï¼šè½¬åŒ–æˆäºŒåˆ†æœç´¢ï¼Œæ™®é€šè¿­ä»£æœç´¢ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å•è°ƒæ€§ä»å·¦ä¸‹è§’æˆ–è€…å³ä¸Šè§’å¼€å§‹æœç´¢ã€‚
>
>   ![image-20210731170443016](images/image-20210731170443016.png)

```python
class Solution:
    def searchMatrix(self, matrix: List[List[int]], target: int) -> bool:
        """
        æ°´å¹³æ˜¯å•è°ƒé€’å¢,çºµå‘æ˜¯å•è°ƒé€’å¢
        """
        m = len(matrix)
        n = len(matrix[0])

        left = 0
        right = m-1
        while left <= right:
            mid = left + (right-left) // 2
            if matrix[mid][n-1] == target: 
                return True
            elif matrix[mid][n-1] > target:
                right = mid - 1
            else:
                left = mid + 1
        # print(right)
        right += 1
        if right == m: return False

        index = right
        left = 0
        right = n-1
        while left <= right:
            mid = left + (right-left) // 2
            if matrix[index][mid] == target:
                return True
            elif matrix[index][mid] > target:
                right = mid - 1
            else:
                left = mid + 1
        return False
```



##### 240. æœç´¢äºŒç»´çŸ©é˜µ II

>   æ€è·¯ï¼šå¯ä»¥é‡‡ç”¨äºŒåˆ†æœç´¢ï¼Œé€’å½’æœç´¢ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å•è°ƒæ€§ä»å·¦ä¸‹è§’æˆ–è€…å³ä¸Šè§’å¼€å§‹æœç´¢ã€‚
>
>   ![image-20210523194954230](images/image-20210523194954230-1621770595369.png)

```python
class Solution:
    def searchMatrix(self, matrix: List[List[int]], target: int) -> bool:
        def check(x,y,m,n):
            if x >= 0 and x < m and y >= 0 and y < n: return True
            else: return False

        @functools.lru_cache(None)
        def helper(s_x,s_y,e_x,e_y):
            if s_x <= e_x and s_y <= e_y and \
                check(s_x,s_y,m,n) and check(e_x,e_y,m,n):

                mid_x = s_x + (e_x - s_x) // 2
                mid_y = s_y + (e_y - s_y) // 2

                if matrix[mid_x][mid_y] == target: 
                    return True
                elif matrix[mid_x][mid_y] > target: 
                    return helper(s_x,s_y,mid_x-1,mid_y-1) or \
                            helper(mid_x,s_y,e_x,mid_y-1) or \
                            helper(s_x,mid_y,mid_x-1,e_y)
                elif matrix[mid_x][mid_y] < target: 
                    return helper(mid_x+1,mid_y+1,e_x,e_y) or \
                            helper(mid_x+1,s_y,e_x,mid_y) or \
                            helper(s_x,mid_y+1,mid_x,e_y)

        m = len(matrix)
        n = len(matrix[0])
        start_x = 0
        start_y = 0
        end_x = m-1
        end_y = n-1

        return helper(start_x,start_y,end_x,end_y)
```

##### 153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼

>   ![image-20210823171317100](images/image-20210823171317100.png)
>
>   <img src="https://assets.leetcode-cn.com/solution-static/153/1.png" alt="fig1" style="zoom: 33%;" />

```python
class Solution:
    def findMin(self, nums: List[int]) -> int:
        n = len(nums)
        if nums[n-1] >= nums[0]: return nums[0]

        left = 0
        right = n - 1

        while left <= right:
            mid = left + (right-left) // 2
            if nums[mid] >= nums[0]:
                left = mid + 1
            else:
                right = mid - 1
        return nums[left] # ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ— è„‘è¾“å‡ºleftï¼Œå¦‚æœç»“æœä¸å¯¹å†è¿›è¡Œè°ƒæ•´
```

##### 300 æœ€é•¿é€’å¢å­åºåˆ— ğŸ‰ğŸ‰

>   ![image-20210823174132619](images/image-20210823174132619.png)
>
>   éœ€è¦å®šä¹‰ä¸¤ä¸ªæ•°ç»„ï¼Œä¸€ä¸ª `dpæ•°ç»„` è¡¨ç¤ºçš„å«ä¹‰æ˜¯åˆ°ç¬¬iä¸ªå…ƒç´ æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆå­—å…¸åºæœ€å°ï¼‰ï¼Œä¸€ä¸ª `ansæ•°ç»„` è¡¨ç¤ºçš„å«ä¹‰æ˜¯åˆ°ç¬¬iä¸ªå…ƒç´ ä¸ºç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚

```python
import bisect
class Solution:
    def LIS(self , arr ):
        dp = []
        ans = []
        n = len(arr)
        for i in range(n):
            if not dp or dp[-1] < arr[i]:
                dp.append(arr[i])
                ans.append(len(dp))
            else:
                idx = bisect.bisect_left(dp,arr[i])
                dp[idx] = arr[i]
                ans.append(idx+1)
        j = len(dp)
        
        for i in range(n-1,-1,-1):
            if j == 0: break
            if ans[i] == j:
                dp[j-1] = arr[i]
                j -= 1
        return dp
```

##### 658. æ‰¾åˆ° K ä¸ªæœ€æ¥è¿‘çš„å…ƒç´  ğŸ‰ğŸ‰

>   ![image-20210823191220459](images/image-20210823191220459.png)

```python
class Solution:
    def findClosestElements(self, arr: List[int], k: int, x: int) -> List[int]:
        n = len(arr)
        idx = bisect.bisect_left(arr,x)
        if k >= n: return arr
        if idx >= n: return arr[-k:]
        if idx <= 0: return arr[:k]

        if arr[idx] != x and arr[idx]-x >= x-arr[idx-1]:
            idx -= 1
        k -= 1
        left = idx - 1
        right = idx + 1
        while k > 0 and left >= 0 and right < n: 
            l = x-arr[left]
            r = arr[right]-x
            if l <= r:
                left -= 1
            else:
                right += 1
            k -= 1
        
        if k > 0:
            if left > 0: left = left - k
            if right < n-1: right = right + k
        return arr[left+1:right] 
```



##### 852. å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•

>   ![image-20210802180814465](images/image-20210802180814465.png)

```python
class Solution:
    def peakIndexInMountainArray(self, arr: List[int]) -> int:
        n = len(arr)
        left = 0
        right = n-1
        while left <= right:
            mid = left + (right-left)//2
            if arr[mid] > arr[mid-1]:
                left = mid + 1
            else:
                right = mid - 1
        return right 
```



##### 1095. å±±è„‰æ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼

>   ![image-20210802194239840](images/image-20210802194239840.png)
>
>   æ€è·¯ï¼šå…ˆæŒ‰ç…§äºŒåˆ†æ³•æ‰¾åˆ°å±±è„‰æ•°ç»„çš„å±±å³°å…ƒç´ ï¼Œç„¶ååˆ©ç”¨äºŒåˆ†æ³•åœ¨ä¸Šå¡å’Œä¸‹å¡ä¸Šåˆ†åˆ«è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚

```python
# """
# This is MountainArray's API interface.
# You should not implement it, or speculate about its implementation
# """
#class MountainArray:
#    def get(self, index: int) -> int:
#    def length(self) -> int:

class Solution:
    def findInMountainArray(self, target: int, mountain_arr: 'MountainArray') -> int:
        n = mountain_arr.length()
        left,right = 0,n-1
        while left <= right:
            mid = left + (right-left) // 2
            cur = mountain_arr.get(mid)
            if mid > 0: left_val = mountain_arr.get(mid-1) 
            else: left_val = float("-inf")
            if cur > left_val:
                left = mid + 1
            else:
                right = mid - 1
        idx = right
        cur = mountain_arr.get(idx)
        if cur == target: return idx
        if cur < target: return -1
        left,right = 0,idx-1
        while left <= right:
            mid = left + (right-left) // 2
            cur = mountain_arr.get(mid)
            if cur == target: return mid
            if cur < target:
                left = mid + 1
            else:
                right = mid - 1
        
        left,right = idx+1,n-1
        while left <= right:
            mid = left + (right-left) // 2
            cur = mountain_arr.get(mid)
            if cur == target: return mid
            if cur < target:
                right = mid - 1
            else:
                left = mid + 1
        return -1
```

##### 354. ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜

>   æ€è·¯ï¼šéœ€è¦å®ç°ä¸€ä¸ªäºŒåˆ†æœç´¢ï¼Œå»æŸ¥æ‰¾ä¸‹ç¡®ç•Œã€‚
>
>   ![image-20210723203012570](images/image-20210723203012570.png)
>
>   ![image-20210723202255101](images/image-20210723202255101.png)

```python
class Solution:
    def maxEnvelopes(self, envelopes: List[List[int]]) -> int:
        def lower_bound(nums,key):
            left,right = 0,len(nums)-1
            ans = left
            while left <= right:
                mid = left + (right-left) // 2
                if nums[mid][1] >= key:
                    ans = mid
                    right = mid - 1
                else:
                    left = mid + 1            
            return ans

        envelopes.sort(key=lambda x:[x[0],-x[1]]) # æŒ‰ç…§ç¬¬ä¸€ç»´å‡åºï¼Œç¬¬äºŒç»´é™åº
        dp = []
        n = len(envelopes)

        for i in range(n):
            if not dp or dp[-1][1] < envelopes[i][1]:
                dp.append(envelopes[i])
            else:
                idx = lower_bound(dp,envelopes[i][1])
                dp[idx] = envelopes[i]
        return len(dp)
```

##### 611 æœ‰æ•ˆä¸‰è§’å½¢çš„ä¸ªæ•°

>   ![image-20210906175537748](images/image-20210906175537748.png)
>
>   è´ªå¿ƒ + äºŒåˆ†æ€æƒ³

```python
class Solution:
    def triangleNumber(self, nums: List[int]) -> int:
        n = len(nums)
        nums.sort()
        ans = 0
        for i in range(n):
            for j in range(i+1,n):
                cur = nums[i] + nums[j]
                if cur > nums[-1]:
                    ans += (n-j-1)
                else:
                    idx = bisect.bisect_left(nums,cur,j+1,n)
                    ans += idx-j-1
        return ans
```



##### å‰‘æŒ‡ Offer 51. æ•°ç»„ä¸­çš„é€†åºå¯¹

>   ![image-20210824200659445](images/image-20210824200659445.png)

```python
class Solution:
    def reversePairs(self, nums: List[int]) -> int:
        nums = nums[::-1]
        data = []
        n = len(nums)
        ans = 0
        for i in range(n):
            if not data:
                data.append(nums[i])
            else:
                idx = bisect.bisect_left(data,nums[i])
                ans += idx
                data[idx:idx] = [nums[i]] # å¯ä»¥å®ç° `O(1)` çš„æ—¶é—´æ•ˆç‡
        return ans
```



##### å‰‘æŒ‡ Offer 53 - II. 0ï½n-1ä¸­ç¼ºå¤±çš„æ•°å­— ğŸ‰

>   ![image-20210824195358903](images/image-20210824195358903.png)
>
>   ![image-20210824200056102](images/image-20210824200056102.png)

```python
class Solution:
    def missingNumber(self, nums: List[int]) -> int:
        n = len(nums)
        left = 0
        right = n-1
        while left <= right:
            mid = left + (right-left) // 2
            if nums[mid] == mid:
                left = mid + 1
            elif nums[mid] > mid: # äºŒæ®µæ€§ï¼Œåœ¨å·¦è¾¹
                right = mid - 1
        return left
```

##### LCP 28. é‡‡è´­æ–¹æ¡ˆ 

>   ![image-20210805153045950](images/image-20210805153045950.png)

```python
class Solution:
    def purchasePlans(self, nums: List[int], target: int) -> int:
        import bisect
        MAX = 1000000007
        nums.sort()
        n = len(nums)
        
        ans = 0
        for i in range(1,n):
            if target <= nums[i]: break
            idx = bisect.bisect_right(nums,target - nums[i],0,i)
            ans = (ans + idx) % MAX
        return ans
```



#### 2.2 é¢˜å‹äºŒï¼šåœºæ™¯é¢˜ï¼Œ`å€¼åŸŸä¸Šçš„äºŒåˆ†æŸ¥æ‰¾`

##### 378. æœ‰åºçŸ©é˜µä¸­ç¬¬ K å°çš„å…ƒç´ 

>   ![image-20210823195801391](images/image-20210823195801391.png)
>
>   +   ç¬¬ä¸€ä¸ªç‚¹ï¼Œç”±äºæœ‰é‡å¤å…ƒç´ ï¼Œæ‰€ä»¥å®é™…ä¸Šæ˜¯æ‰¾ `lower_bound`
>
>   +   ç¬¬äºŒä¸ªç‚¹ï¼Œä¸ºäº†æ‰¾åˆ°å°äº `mid` çš„å…ƒç´ çš„æ•°é‡ï¼Œéœ€è¦åˆ©ç”¨æœ‰åºçŸ©é˜µçš„æœ‰åºæ€§ï¼Œä»å·¦ä¸‹è§’å¼€å§‹æœç´¢
>
>       <img src="images/378_fig3.png" alt="fig3" style="zoom: 33%;" />

```python
class Solution:
    def kthSmallest(self, matrix: List[List[int]], k: int) -> int:
        n = len(matrix)
        left = matrix[0][0]
        right = matrix[n-1][n-1]
        
        def get_count(matrix,mid):
            x,y = n-1,0
            cnt = 0
            while x < n and x >= 0 and y < n and y >=0:
                if matrix[x][y] <= mid:
                    cnt += (x+1)
                    y += 1
                elif matrix[x][y] > mid:
                    x -= 1
            return cnt

        while left <= right:
            mid = left + (right-left) // 2
            cur = get_count(matrix,mid)
            if cur >= k:
                right = mid - 1
            else:
                left = mid + 1
        return left
```



##### 719. æ‰¾å‡ºç¬¬ k å°çš„è·ç¦»å¯¹ ğŸ‰ğŸ‰

>   ![image-20210823195650844](images/image-20210823195650844.png)
>
>   æ€è·¯ï¼š
>
>   +   ç¬¬ä¸€ä¸ªæ˜¯äºŒåˆ†æ³•çš„åº”ç”¨
>   +   ç¬¬äºŒä¸ªæ˜¯åŸºäºåŒæŒ‡é’ˆç»Ÿè®¡æœ‰åºæ•°ç»„ä¸­å°äº `mid` çš„æ•°å¯¹æ•°é‡ï¼Œåˆ©ç”¨çš„æ˜¯æ»‘åŠ¨çª—å£è¿›è¡Œç»Ÿè®¡ã€‚

```python
class Solution:
    def smallestDistancePair(self, nums: List[int], k: int) -> int:
        def get_count(dis):
            count = left = 0
            right = 0
            while right < len(nums):
                while left <= right and nums[right]-nums[left] > dis:
                    left += 1
                count += (right-left)
                right += 1
            return count
        
        nums.sort()
        left,right = 0,nums[-1]-nums[0]
        res = -1
        while left <= right:
            mid = left + (right-left) // 2
            if get_count(mid) >= k: # ç»Ÿè®¡é—´è·å°äºmidçš„æ•°å¯¹çš„æ•°é‡ï¼Œå¯èƒ½æ²¡æœ‰æ°å¥½ä¸ºkçš„ï¼Œè¿™æ—¶å€™å–ä¸‹ç•Œ
                res = mid
                right = mid - 1 
            else:
                left = mid + 1
        return res
```



##### 1011. åœ¨ D å¤©å†…é€è¾¾åŒ…è£¹çš„èƒ½åŠ› ğŸ‰

>   ![image-20210823204845636](images/image-20210823204845636.png)
>
>   å’Œ `Lintcode - 437 ä¹¦ç±å¤å°` æ€è·¯ä¸€è‡´ï¼Œå°±æ˜¯å°†æ•°æ®åˆ’åˆ†æˆDä»½ï¼Œä½¿å¾—Dä»½ä¸­æœ€å¤§çš„é‚£ä¸ªæ•°æœ€å°ã€‚

```python
class Solution:
    def shipWithinDays(self, weights: List[int], days: int) -> int:
        """
        1. å°±æ˜¯å°†æ•°æ®åˆ’åˆ†æˆDä»½ï¼Œä½¿å¾—Dä»½ä¸­æœ€å¤§çš„é‚£ä¸ªæ•°æœ€å°ã€‚
        2. è´§ç‰©å¿…é¡»æŒ‰ç…§ç»™å®šçš„é¡ºåºè£…è¿ï¼Œè¿™é™å®šäº†åˆ†å‰²æ—¶æ•°ç»„å¿…éœ€æ˜¯è¿ç»­çš„
        """
        left = min(weights)
        right = sum(weights)
        n = len(weights)
        
        def get_count(weights,mid):
            cnt = 1
            cur = 0
            for i in range(n):
                cur += weights[i]
                if weights[i] > mid: return float("inf")
                if cur > mid:
                    cnt += 1
                    cur = weights[i]
            return cnt
	    res = -1
        while left <= right:
            mid = left + (right-left) // 2
            cur = get_count(weights,mid) # ç»Ÿè®¡å¯¹åº”è¿è½½é‡éœ€è¦çš„å¤©æ•°ï¼Œ
            if cur <= days:
                res = mid
                right = mid - 1
            else:
                left = mid + 1
        return res
```

##### 875. çˆ±åƒé¦™è•‰çš„ç‚ç‚

>   ![image-20210823210114838](images/image-20210823210114838.png)
>
>   åŒæ ·å¯ä»¥è¢«å®šä¹‰ä¸ºï¼š`æœ€å¤§å€¼æœ€å°åŒ–é—®é¢˜`
>
>   +   æ ¹æ®é¢˜æ„å¯ä»¥çŸ¥é“ï¼šç‚ç‚åƒé¦™è•‰çš„é€Ÿåº¦è¶Šå°ï¼Œè€—æ—¶è¶Šå¤šã€‚åä¹‹ï¼Œé€Ÿåº¦è¶Šå¤§ï¼Œè€—æ—¶è¶Šå°‘ï¼Œè¿™æ˜¯é¢˜ç›®çš„ å•è°ƒæ€§ï¼›
>   +   æˆ‘ä»¬è¦æ‰¾çš„æ˜¯é€Ÿåº¦ã€‚å› ä¸ºé¢˜ç›®é™åˆ¶äº†ç‚ç‚ä¸€ä¸ªå°æ—¶ä¹‹å†…åªèƒ½é€‰æ‹©ä¸€å †é¦™è•‰åƒï¼Œå› æ­¤é€Ÿåº¦æœ€å¤§å€¼å°±æ˜¯è¿™å‡ å †é¦™è•‰ä¸­ï¼Œæ•°é‡æœ€å¤šçš„é‚£ä¸€å †ã€‚é€Ÿåº¦çš„æœ€å°å€¼æ˜¯ 11ï¼Œå…¶å®è¿˜å¯ä»¥å†åˆ†æä¸€ä¸‹ä¸‹ç•Œæ˜¯å¤šå°‘ï¼Œç”±äºäºŒåˆ†æœç´¢çš„æ—¶é—´å¤æ‚åº¦å¾ˆä½ï¼Œä¸¥æ ¼çš„åˆ†æä¸æ˜¯å¾ˆæœ‰å¿…è¦ï¼›
>   +   è¿˜æ˜¯å› ä¸ºç‚ç‚ä¸€ä¸ªå°æ—¶ä¹‹å†…åªèƒ½é€‰æ‹©ä¸€å †é¦™è•‰åƒï¼Œå› æ­¤ï¼šæ¯å †é¦™è•‰åƒå®Œçš„è€—æ—¶ = è¿™å †é¦™è•‰çš„æ•°é‡ / ç‚ç‚ä¸€å°æ—¶åƒé¦™è•‰çš„æ•°é‡ã€‚æ ¹æ®é¢˜æ„ï¼Œè¿™é‡Œçš„ / åœ¨ä¸èƒ½æ•´é™¤çš„æ—¶å€™ï¼Œéœ€è¦ ä¸Šå–æ•´ã€‚

```python
class Solution:
    def minEatingSpeed(self, piles: List[int], h: int) -> int:
        right = max(piles)
        left = 1

        def get_count(piles,mid):
            cnt = 0
            for pile in piles:
                cnt += ((pile-1) // mid) + 1
            return cnt


        while left <= right:
            mid = left + (right-left) // 2
            cur = get_count(piles,mid)
            if cur <= h:
                right = mid - 1
            else:
                left = mid + 1
        return left
```







##### 410. åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼

>   ![image-20210823210953201](images/image-20210823210953201.png)
>
>   æœ€å°å€¼æœ€å¤§åŒ–é—®é¢˜ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯è¿™ä¸€åˆ—é¢˜ç›®çš„åŸå‹é¢˜ã€‚

```python
class Solution:
    def splitArray(self, nums: List[int], m: int) -> int:
        left = max(nums)
        right = sum(nums)
        n = len(nums)

        def get_count(nums,mid):
            cnt = 1
            cur = 0
            for i in range(n):
                cur += nums[i]
                if cur > mid:
                    cnt += 1
                    cur = nums[i]
            return cnt
                
        while left <= right:
            mid = left + (right-left) // 2
            cur = get_count(nums,mid)
            if cur <= m:
                right = mid - 1
            else:
                left = mid + 1
        return left

```

##### 1482. åˆ¶ä½œ m æŸèŠ±æ‰€éœ€çš„æœ€å°‘å¤©æ•°

>   ![image-20210824101530257](images/image-20210824101530257.png)

```python
class Solution:
    def minDays(self, bloomDay: List[int], m: int, k: int) -> int:
        """
        å€¼åŸŸä¸Šçš„äºŒåˆ†æ³•ï¼Œ
        """
        left = 1
        right = max(bloomDay)
        n = len(bloomDay)
        if m*k > len(bloomDay): return -1

        def get_count(mid,bloomDay):
            cnt = 0
            K = k
            for i in range(n):
                if bloomDay[i] <= mid:
                    K -= 1
                    if K == 0:
                        cnt += 1
                        K = k
                else:
                    K = k
            return cnt
        
        while left <= right:
            mid = left + (right-left) // 2
            cur = get_count(mid,bloomDay)
            
            if cur >= m: #  m æŸèŠ±
                right = mid - 1
            else:
                left = mid + 1
        return left
```

##### Lintcode - 437 ä¹¦ç±å¤å°

>   ![image-20210824102440910](images/image-20210824102440910.png)

+   äºŒåˆ†è§£æ³•

```python
class Solution:
    """
    @param pages: an array of integers
    @param k: An integer
    @return: an integer
    """
    def copyBooks(self, pages, k):
        # write your code here
        if not pages: return 0
        
        right = sum(pages)
        left = max(pages)
        n = len(pages)

        def get_count(mid,pages): # midè¡¨ç¤ºæ—¶é—´
            cur = 0
            cnt = 1
            for i in range(n):
                cur += pages[i]
                if cur > mid:
                    cnt += 1
                    cur = pages[i]
            return cnt

        while left <= right:
            mid = left + (right-left) // 2
            cur = get_count(mid,pages)
            if cur <= k:
                right = mid - 1
            else:
                left = mid + 1
        return left
```

+   åŠ¨æ€è§„åˆ’è§£æ³•

```python
class Solution:
    """
    @param pages: an array of integers
    @param k: An integer
    @return: an integer
    """
    def copyBooks(self, pages, k):
        # write your code here
        
        # å‰ç¼€å’Œ
        prefix = [0]
        n = len(pages)
        for i in range(n):
            prefix.append(pages[i]+prefix[-1])
        
        dp = [[float("inf")]*(k+1) for i in range(n+1)]
        for i in range(k+1): dp[0][i] = 0
        for i in range(1,n+1): dp[i][0] = float("inf")

        # åŠ¨æ€è§„åˆ’æ–¹ç¨‹
        for i in range(1,n+1):
            for j in range(1,k+1):
                for m in range(i,-1,-1): # è¡¨ç¤ºå¤šå°‘ä¹¦åˆ†é…ç»™å½“å‰ç”¨æˆ·
                    dp[i][j] = min(dp[i][j],max(dp[i-m][j-1],prefix[i]-prefix[i-m]))
                
#         for row in dp:
#             print(row)
        return dp[n][k]
```

##### 1552. ä¸¤çƒä¹‹é—´çš„ç£åŠ›

>   ![image-20210824102751961](images/image-20210824102751961.png)
>
>   æœ€å°å€¼æœ€å¤§åŒ–é—®é¢˜ã€‚åœ¨äºŒåˆ†çš„æ—¶å€™ï¼Œç›¸å½“äºæ±‚`upper_bound`ã€‚

```python
class Solution:
    def maxDistance(self, position: List[int], m: int) -> int:
        """
        å€¼åŸŸçš„äºŒåˆ†æ³•
        """
        position.sort()
        n = len(position)
        left = min([position[i]-position[i-1] for i in range(1,n)])
        right = position[-1] - position[0]

        def get_count(position,mid):
            l,r = 0,0
            cnt = 1
            while r < n:
                if position[r] - position[l] >= mid:
                    l = r
                    cnt += 1
                else:
                    r += 1
            return cnt
                    
        while left <= right:
            mid = left + (right-left) // 2
            cnt = get_count(position,mid)
            if cnt >= m:
                left = mid + 1
            else:
                right = mid - 1
        return right
```



##### 1300. è½¬å˜æ•°ç»„åæœ€æ¥è¿‘ç›®æ ‡å€¼çš„æ•°ç»„å’Œ ğŸ‰ğŸ‰

>   ![image-20210825141447218](images/image-20210825141447218.png)
>
>   è¿™é‡Œçš„æŠ€å·§åœ¨äºè¿”å›çš„æ˜¯ `res` è€Œä¸æ˜¯ `left` æˆ–è€… `right`ï¼Œåˆ©ç”¨çš„æ˜¯åŒé‡äºŒåˆ†æŸ¥æ‰¾ã€‚

```python
class Solution:
    def findBestValue(self, arr: List[int], target: int) -> int:
        arr.sort()
        n = len(arr)

        # ç‰¹ä¾‹ï¼Œå¦‚æœæ‰€æœ‰å…ƒç´ çš„å’Œå°äºtargetï¼Œé‚£ä¹ˆæ— è®ºå¦‚ä½•è½¬å˜ï¼Œç›®æ ‡å€¼ä¹Ÿä¸ä¼šå˜å¾—æ›´å¤§
        if sum(arr) <= target: return arr[-1]

        # è®¡ç®—å‰ç¼€å’Œ
        prefix = [0]
        for i in range(n):
            prefix.append(arr[i]+prefix[-1])          
        
        # è®¡ç®—ç¿»è½¬åçš„ç´¯åŠ å’Œ
        def get_count(arr,mid):
            idx = bisect.bisect_left(arr,mid)
            cur = (prefix[idx]-prefix[0]) + (mid*(n-idx))
            return cur
        
        # 1. ç¡®å®šæŸ¥æ‰¾èŒƒå›´ï¼Œæœ€å°çš„å€¼å¯ä»¥æ˜¯0
        left = 0
        right = arr[-1]
        
        diff = float("inf")
        res = None
        while left <= right:
            mid = left + (right-left) // 2
            cur = get_count(arr,mid)
            # 2. åˆ©ç”¨äºŒæ®µæ€§è´¨
            if cur == target:
                diff = 0
                res = mid
                right = mid - 1
            elif cur < target:
                if target-cur <= diff:
                    diff = target-cur
                    res = mid
                left = mid + 1
            elif cur > target:
                if cur-target < diff:
                    diff = cur-target
                    res = mid
                right = mid - 1
        return res
```



## 3. æ€»ç»“

ç¬¬ä¸€ç±»ï¼šæŠ ç»†èŠ‚çš„ï¼ŒäºŒåˆ†å¾ˆæ˜ç¡®ï¼Œå°±æ˜¯åœ¨ `æ•´æ•°çš„å®šä¹‰åŸŸ` ä¸Šè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚

ç¬¬äºŒç±»ï¼šæ•°å­¦é¢˜ï¼Œæ¶‰åŠåˆ°é«˜ç²¾åº¦é—®é¢˜ï¼Œæ˜¯åœ¨ `å®æ•°çš„å®šä¹‰åŸŸ` ä¸Šè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚

ç¬¬ä¸‰ç±»ï¼šåœºæ™¯é¢˜ï¼Œæ˜¯åœ¨`å€¼åŸŸ`ä¸Šè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚

#### ç¬¬ä¸€ç±» æ•´æ•°çš„å®šä¹‰åŸŸä¸Šçš„äºŒåˆ†æœç´¢

![image-20210825110311972](images/image-20210825110311972.png)

#### ç¬¬äºŒç±» å®æ•°çš„å®šä¹‰åŸŸä¸Šçš„äºŒåˆ†æœç´¢

![image-20210825112418942](images/image-20210825112418942-1634461455554.png)

#### ç¬¬ä¸‰ç±» å€¼åŸŸä¸Šçš„äºŒåˆ†æŸ¥æ‰¾

ç»å¸¸é’ˆå¯¹`æœ€å¤§å€¼æœ€å°åŒ–é—®é¢˜`å’Œ`æœ€å°å€¼æœ€å¤§åŒ–é—®é¢˜`ã€‚



![image-20210802181420467](images/image-20210802181420467.png)

## å¼•ç”¨

```latex
[1] å†™å¯¹äºŒåˆ†æŸ¥æ‰¾ä¸èƒ½é æ¨¡æ¿ï¼Œéœ€è¦ç†è§£åŠ ç»ƒä¹  https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/
```

