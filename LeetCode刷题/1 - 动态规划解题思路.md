## 1. åŠ¨æ€è§„åˆ’åŸºæœ¬æµç¨‹

#### 1.1 åŠ¨æ€è§„åˆ’æµç¨‹æ¦‚è¿°

```mermaid
graph LR
A(é‡å å­é—®é¢˜)-->D(åŠ¨æ€è§„åˆ’)
B(æœ€ä¼˜å­ç»“æ„)-->D(åŠ¨æ€è§„åˆ’)
C(çŠ¶æ€è½¬ç§»æ–¹ç¨‹)-->D(åŠ¨æ€è§„åˆ’)
D-->E(ç¡®å®šbase case)
D-->F(ç¡®å®šstate)
D-->G(ç¡®å®šaction)
D-->H(å®šä¹‰DPæ•°ç»„å«ä¹‰)

1(ç¡®å®šbase case)-->2(ç¡®å®šstate)-->3(ç¡®å®šaction)-->4(å®šä¹‰DPæ•°ç»„å«ä¹‰)
```

**é‡å å­é—®é¢˜ï¼š** é€’å½’æ ‘ä¸­çš„èŠ‚ç‚¹ï¼Œè‡ªä¸Šè€Œä¸‹å­˜åœ¨é‡å¤èŠ‚ç‚¹ã€‚

**æœ€ä¼˜å­ç»“æ„ï¼š**æ³¨æ„è¿™çš„`æœ€ä¼˜` ï¼Œæ¯”å¦‚:shu
$$
dp(n) = \min \{dp(n-coin)+1|coin\in coins\}
$$
**çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š**ä»ä¸€ä¸ªçŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„è§„åˆ™



**base caseï¼š** è‡ªåº•å‘ä¸Šï¼Œæœ€åº•ä¸‹çš„å°±æ˜¯base caseï¼Œç¡¬å¸é—®é¢˜ä¸­ï¼Œç›®æ ‡é‡‘é¢ä¸º0æ—¶ï¼Œç®—æ³•è¿”å›0ã€‚

**stateï¼š**åŸé—®é¢˜å’Œå­é—®é¢˜ä¸­ä¼šå˜æ¢çš„å˜é‡ã€‚æ¯”å¦‚ç¡¬å¸é—®é¢˜ä¸­ï¼Œå”¯ä¸€çš„çŠ¶æ€å°±æ˜¯ç›®æ ‡é‡‘é¢`amount`ã€‚

**actionï¼š**å¯¼è‡´çŠ¶æ€å‘ç”Ÿå˜æ¢çš„è¡Œä¸ºã€‚æ¯”å¦‚é€‰æ‹©å“ªä¸€æšç¡¬å¸ã€‚

**dpå‡½æ•°/æ•°ç»„çš„å«ä¹‰ï¼š** **å‡½æ•°/æ•°ç»„**çš„**è¾“å…¥/ä¸‹æ ‡**æ˜¯çŠ¶æ€è½¬ç§»è¿‡ç¨‹ä¸­ä¼šå˜åŒ–çš„é‡ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è®²åˆ°çš„çŠ¶æ€ã€‚è€Œ**è¾“å‡º**å°±æ˜¯æˆ‘ä»¬éœ€è¦æ±‚è§£çš„ç›®æ ‡ï¼Œæ¯”å¦‚è¾¾åˆ°$n$éœ€è¦çš„æœ€å°çš„ç¡¬å¸æ•°ç›®$\text{dp}(n)=3$ï¼›$\Leftrightarrow$ è¿™ä¸ª**dp**çš„å®šä¹‰å¾ˆé‡è¦ï¼Œå®šä¹‰ä¸æ¸…ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±å†™ä¸å‡ºæ¥ã€‚



#### 1.2 åŠ¨æ€è§„åˆ’é—®é¢˜åˆ†ç±»

![img](images/1f95da43d1bdeebdd1213bb804034ddc5f906dc61451cd63f2b5ab5d0eb33b33-ã€ŒåŠ¨æ€è§„åˆ’ã€é—®é¢˜æ€è€ƒæ–¹å‘-1623234580604.png)



<img src="images/dp-1623234926635.jpg" alt="preview" style="zoom:50%;" />

#### 1.3 å¯åšçš„åˆ—è¡¨ [ğŸ”—](https://leetcode-cn.com/circle/article/NfHhXD/)

>   çº¿æ€§DP

+   æœ€ç»å…¸å•ä¸²ï¼š300. æœ€é•¿ä¸Šå‡å­åºåˆ—

+   æœ€ç»å…¸åŒä¸²ï¼š1143. æœ€é•¿å…¬å…±å­åºåˆ—

+   ç»å…¸é—®é¢˜ï¼š
```python
120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ
53. æœ€å¤§å­åºå’Œ
152. ä¹˜ç§¯æœ€å¤§å­æ•°ç»„
887. é¸¡è›‹æ‰è½ï¼ˆDP+äºŒåˆ†ï¼‰
354. ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜
```

+   æ‰“å®¶åŠ«èˆç³»åˆ—: (æ‰“å®¶åŠ«èˆ3 æ˜¯æ ‘å½¢DP)
```python
198. æ‰“å®¶åŠ«èˆ
213. æ‰“å®¶åŠ«èˆ II
```

+   è‚¡ç¥¨ç³»åˆ—:
```python
121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº
122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II
123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III
188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV
309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ
714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹
```

+ å­—ç¬¦ä¸²åŒ¹é…ç³»åˆ—
```python
72. ç¼–è¾‘è·ç¦»
44. é€šé…ç¬¦åŒ¹é…
10. æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
```

>   åŒºé—´DP
```python
312. æˆ³æ°”çƒ
516. æœ€é•¿å›æ–‡å­åºåˆ—
546. ç§»é™¤ç›’å­
664. å¥‡æ€ªçš„æ‰“å°æœº
730. ç»Ÿè®¡ä¸åŒå›æ–‡å­å­—ç¬¦ä¸²
1039. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†
```

>   èƒŒåŒ…é—®é¢˜

```python
416. åˆ†å‰²ç­‰å’Œå­é›† (01èƒŒåŒ…-è¦æ±‚æ°å¥½å–åˆ°èƒŒåŒ…å®¹é‡)
494. ç›®æ ‡å’Œ (01èƒŒåŒ…-æ±‚æ–¹æ¡ˆæ•°)
322. é›¶é’±å…‘æ¢ (å®Œå…¨èƒŒåŒ…)
518. é›¶é’±å…‘æ¢ II (å®Œå…¨èƒŒåŒ…-æ±‚æ–¹æ¡ˆæ•°)
474. ä¸€å’Œé›¶ (äºŒç»´è´¹ç”¨èƒŒåŒ…)
```

>   è®¡æ•°å‹ DP

```python
62. ä¸åŒè·¯å¾„
63. ä¸åŒè·¯å¾„ II
96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ (å¡ç‰¹å…°æ•°)
1259. ä¸ç›¸äº¤çš„æ¡æ‰‹ (å¢å¡æ–¯å®šç†æ±‚å¤§ç»„åˆæ•°æ¨¡è´¨æ•°)
```

>   åšå¼ˆå‹DP

```python
ç­–æ¢…æ´›å®šç†ï¼ŒSG å®šç†ï¼Œminimax
# ç¿»è½¬æ¸¸æˆ
293. ç¿»è½¬æ¸¸æˆ
294. ç¿»è½¬æ¸¸æˆ II

# Nimæ¸¸æˆ
292. Nim æ¸¸æˆ

# çŸ³å­æ¸¸æˆ
877. çŸ³å­æ¸¸æˆ
1140. çŸ³å­æ¸¸æˆ II

# äº•å­—æ¸¸æˆ
348. åˆ¤å®šäº•å­—æ£‹èƒœè´Ÿ
794. æœ‰æ•ˆçš„äº•å­—æ¸¸æˆ
1275. æ‰¾å‡ºäº•å­—æ£‹çš„è·èƒœè€…
```

>   è®°å¿†åŒ–æœç´¢

```python
329. çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„
576. å‡ºç•Œçš„è·¯å¾„æ•°
```



## 2 çº¿æ€§DP

#### 2.1 åŸºæœ¬ç»“æ„

ä¸€ç»´DPçš„ç®—æ˜¯æ¯”è¾ƒç®€å•çš„DPé—®é¢˜ï¼ˆä¹Ÿæœ‰ä¾‹å¤–ï¼‰ï¼Œå› ä¸ºæ¶‰åŠçš„çŠ¶æ€å¾€å¾€æœ‰é™ã€‚

æœ€ç›´è§‚çš„è§£å†³æ–¹æ³•å°±æ˜¯äºŒç»´éå†ï¼Œæš´åŠ›è§£å†³ã€‚

```python
# (1) æš´åŠ›æ³•è§£å†³
for i in range(n):
    for j in range(i):
        dp[i] = æœ€å€¼(dp[i],dp[j]+...)
```

è€Œä¸€äº›å˜å½¢é¢˜å°±æ˜¯åœ¨ç©ºé—´ä¸Šæˆ–è€…æ—¶é—´ä¸Šè¿›è¡Œå‹ç¼©ã€‚

#### 2.2 é¢˜ç›®

##### 53 æœ€å¤§å­åºå’Œ

æ€è·¯ï¼šåŸºæœ¬çš„æ€æƒ³æ˜¯åˆ¤æ–­å½“å‰`num[i]`æ˜¯å¦å¯ä»¥ç´¯åŠ åˆ°å†å²æœ€å¤§å’Œä¸Šï¼›è€Œåˆ¤æ–­æ ‡å‡†å°±æ˜¯`cur_sum`æ˜¯å¦å¤§äº0ï¼Œå¦‚æœå¤§äº0ï¼Œåˆ™ç»§ç»­ç´¯åŠ ï¼Œå¦åˆ™é‡æ–°å¼€å§‹ã€‚è¿™ä¸€é¢˜å®é™…ä¸Šå’ŒåŠ æ²¹ç«™é—®é¢˜ç±»ä¼¼ã€‚

```python
class Solution:
    def maxSubArray(self, nums: List[int]) -> int:
        cur_sum = nums[0]
        ans = cur_sum
        n = len(nums)
        for i in range(1,n):
            if cur_sum >= 0:
                cur_sum += nums[i]
            else:
                cur_sum = nums[i]
            ans = max(cur_sum,ans)
        return ans
```

##### 55 è·³è·ƒæ¸¸æˆ

>   ![image-20210722153028562](images/image-20210722153028562.png)
>
>   äº‹å®ä¸Šåº”è¯¥æ˜¯è´ªå¿ƒç®—æ³•ã€‚

```python
class Solution:
    def canJump(self, nums: List[int]) -> bool:
        cur_max = 0
        total_max = 0
        n = len(nums)

        for i in range(n):
            if cur_max < i:
                if total_max < i:
                    return False
                cur_max = total_max
            total_max = max(total_max,i+nums[i])
            

        return True


```

##### 1186. åˆ é™¤ä¸€æ¬¡å¾—åˆ°å­æ•°ç»„æœ€å¤§å’Œ

>   ![image-20211017201125164](images/image-20211017201125164.png)
>
>   æ€è·¯ï¼šç±»ä¼¼ä¸ä¹°å–è‚¡ç¥¨é—®é¢˜ï¼Œå¼•å…¥ä¸€ä¸ªé¢å¤–çš„çŠ¶æ€ï¼Œè¡¨ç¤ºåˆ é™¤å…ƒç´ çš„æ•°é‡

```python
class Solution:
    def maximumSum(self, arr: List[int]) -> int:
        """
        dp[i][0] = arr[i] if dp[i-1][0] < 0 else (dp[i-1][0]+arr[i])

        dp[i][1] = max(dp[i-1][1]+arr[i],dp[i-1][0])
        """
        n = len(arr)
        INF = float("inf")
        dp = [[-INF,-INF] for i in range(n)]
        dp[0] = [arr[0],-INF]
        ans = max(dp[0])
        for i in range(1,n):
            dp[i][0] = (0 if dp[i-1][0] < 0 else dp[i-1][0]) + arr[i]
            dp[i][1] = max(dp[i-1][1]+arr[i],dp[i-1][0])
            ans = max(ans,max(dp[i]))
        return ans

```



##### 134 åŠ æ²¹ç«™

>   æ€è·¯ï¼šå¦‚æœå½“å‰çš„å’Œå°äºé›¶ï¼Œåˆ™åŠ å…¥å†å²ï¼Œç„¶åé‡æ–°å¼€å§‹ï¼›å¦åˆ™å°†å½“å‰æ•°å­—åŠ å…¥cur_sumã€‚æœ€åæ¯”è¾ƒcur_sumä¸å†å²ã€‚æƒ³è¦ç†è§£è¿™ä¸€é¢˜ä¸€å®šè¦æ˜ç™½æœ€ä¼˜å­ç»“æ„é—®é¢˜ã€‚
>
>   æ¯”è¾ƒ**æœ€å¤§å­—æ®µå’Œ** å’Œ **æ‰€æœ‰è´Ÿæ•°åŒºé—´** çš„å…³ç³»ã€‚

```python
class Solution:
    def canCompleteCircuit(self, gas: List[int], cost: List[int]) -> int:
        n = len(gas)
        left = [gas[i]-cost[i] for i in range(n)]

        total_neg = 0
        cur_sum = 0
        ans = 0
        for i in range(n):
            if cur_sum < 0:
                ans = i
                total_neg += cur_sum
                cur_sum = left[i]
            else:
                cur_sum += left[i]
        return ans if cur_sum + total_neg >= 0 else -1
```
##### 152 ä¹˜ç§¯æœ€å¤§å­æ•°ç»„

>   æ€è·¯ï¼šè¿™ä¸€é¢˜å’Œè‚¡ç¥¨ä¹°å–çš„æ€è·¯æœ‰ç‚¹ç›¸ä¼¼ï¼Œéœ€è¦æœ€å¤§æ­£æ•°å’Œæœ€å°è´Ÿæ•°ä¹‹é—´è¿›è¡ŒçŠ¶æ€è½¬æ¢ã€‚
>   é‡ç‚¹ğŸš€ï¼šè¿™é‡Œ`dp[i]`æ•°ç»„çš„å®šä¹‰æ˜¯ï¼Œä»¥æ•°å­—`nums[i]`ä¸ºç»“å°¾çš„æœ€å¤§ä¹˜ç§¯ï¼Œå½“ç„¶è¿™ä¸€é¢˜è¿˜éœ€è¦ç»´æŠ¤ä¸€ä¸ªæœ€å°å€¼ã€‚

```python
class Solution:
    def maxProduct(self, nums: List[int]) -> int:
        f_max = f_min = nums[0]
        n = len(nums)
        ans = nums[0]
        for i in range(1,n):
            if nums[i] < 0:
                f_max,f_min = f_min,f_max
            f_max = max(f_max*nums[i],nums[i])
            f_min = min(f_min*nums[i],nums[i])
            ans = max(max(f_max,f_min),ans)
        return ans
```



##### å‰‘æŒ‡ Offer 60 nä¸ªéª°å­çš„ç‚¹æ•°

>   ![image-20210726110036999](images/image-20210726110036999.png)

```python
class Solution:
    def dicesProbability(self, n: int) -> List[float]:
        dp = [[0.0]*(6*n+1) for i in range(n)] 
        start = 1
        end = 6

        for i in range(start,end+1):
            dp[0][i] = 1/6

        for i in range(1,n):
            start += 1
            end += 6
            for j in range(start,end+1):
                begin = j-6 if j > 6 else 1
                dp[i][j] = sum([dp[i-1][k]*(1/6) for k in range(begin,j)])
        
        return dp[n-1][start:end+1]
```



##### 357. è®¡ç®—å„ä¸ªä½æ•°ä¸åŒçš„æ•°å­—ä¸ªæ•° ğŸ‰

>   æ€è·¯ï¼šæŒ‰ç…§æ’åˆ—æ•°æ±‚è§£ï¼Œå¦‚æœä½æ•°ä½nï¼Œé‚£ä¹ˆä¸åŒçš„æ•°å­—ä¸ªæ•°ä¸º:`n*(n-1)*...`ï¼Œ**ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œè¿™åªæ˜¯é•¿åº¦ä¸ºnçš„æ•°å­—**ï¼Œè¿˜éœ€è¦è€ƒè™‘é•¿åº¦ä¸º`n-1,n-2,...,1`çš„æ•°å­—ã€‚

```python
class Solution:
    def countNumbersWithUniqueDigits(self, n: int) -> int:
        """
            dp[i] = dp[i-1] + {10*9*8*...}[i] - {9*8*...}[i-1]
            --> dp[i] = dp[i-1] + {9*9*8*...}[i]
            è¿™é‡Œçš„dp[i-1]è¡¨ç¤ºçš„å«ä¹‰æ˜¯i-1ä½æ•°çš„å„ä½æ•°ä¸åŒçš„æ•°é‡
        """
        if n == 0: return 1
        def helper(m):
            ans = 1
            for i in range(m): ans *= (9-i)
            return ans
        dp = [0]*(n+1)
        dp[0] = 1        
        for i in range(1,n+1):
            dp[i] = dp[i-1] + helper(i-1)*9
        print(dp)
        return dp[n]
```



##### 300 æœ€é•¿é€’å¢å­åºåˆ—

>   æ€è·¯ï¼šè¿™ä¸€é¢˜æ˜¯ä¿„ç½—æ–¯å¥—å¨ƒé—®é¢˜çš„åŸºç¡€é¢˜

```python
class Solution:
    def lengthOfLIS(self, nums: List[int]) -> int:
        """
        å®šä¹‰dp[i]ä¸ºä¸‹æ ‡ä¸ºiæ‰€èƒ½æ„æˆçš„æ•°ç»„çš„æœ‰åºé›†åˆ
        """
        n = len(nums)
        dp = []
        for i in range(n):
            if not dp or dp[-1] < nums[i]:
                dp.append(nums[i])
            else:
                index = bisect.bisect_left(dp,nums[i])
                dp[index] = nums[i]
        
        return len(dp)
```

##### NC 91 æœ€é•¿é€’å¢å­åºåˆ—å˜ç§é¢˜

>   ![image-20210727210429293](images/image-20210727210429293.png)

```python
#
# retrun the longest increasing subsequence
# @param arr intæ•´å‹ä¸€ç»´æ•°ç»„ the array
# @return intæ•´å‹ä¸€ç»´æ•°ç»„
#
import bisect
class Solution:
    def LIS(self , arr ):
        dp = []
        max_lens = []
        n = len(arr)

        for i in range(n):
            if not dp or dp[-1] < arr[i]:
                dp.append(arr[i])
                max_lens.append(len(dp))
            else:
                index = bisect.bisect_left(dp,arr[i])
                dp[index] = arr[i]
                max_lens.append(index+1)
        
        size = len(dp)
        i = len(max_lens) - 1
        ans = []

        while i >= 0:
            if size <= 0: break
            if size == max_lens[i]:
                size -= 1
                dp[size] = arr[i]
            i -= 1
        return dp
```



##### 354. ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜

>   æ€è·¯ï¼šå°†äºŒç»´é—®é¢˜è½¬åŒ–ä¸ºä¸€ç»´çš„æœ€é•¿é€’å¢å­åºåˆ—é—®é¢˜
>
>   ç»™å‡ºä¸€ä¸ªä¾‹å­ï¼š[[2, 3], [5, 4], [6, 5], [6, 7]]ï¼Œå¦‚æœæˆ‘ä»¬åªçœ‹ç¬¬äºŒç»´ï¼Œé‚£ä¹ˆä¼¼ä¹æœ€é•¿é€’å¢å­åºåˆ—ç­‰äº4ï¼Œä½†æ˜¯å‘ç°ç¬¬ä¸‰ä¸ªå’Œç¬¬å››ä¸ªç”±äºå®½åº¦ä¸€æ ·ï¼Œæ‰€ä»¥æ— æ³•å¥—å¨ƒã€‚æ‰€ä»¥å¼•å…¥ç¬¬äºŒç»´æ’åºï¼Œå¾—åˆ°ï¼š
>   [[2, 3], [5, 4], [6, 7], [6, 5]]
> è¿™æ ·å°±è½¬åŒ–æˆäº†ç¬¬äºŒä¸ªç»´åº¦çš„æœ€é•¿é€’å¢å­åºåˆ—é—®é¢˜

```python
class Solution:
    def maxEnvelopes(self, envelopes: List[List[int]]) -> int:
        def lower_bound(nums,key_val,l,r):
            while l < r:
                mid = l + (r-l) // 2
                if nums[mid] == key_val:
                    r = mid
                elif nums[mid] < key_val:
                    l = mid + 1
                else:
                    r = mid
            return l

        if len(envelopes) <= 1: return len(envelopes)
        envelopes.sort(key=lambda x:(x[0],-x[1]))

        dp = [envelopes[0][1]]
        for i in range(1,len(envelopes)):
            if envelopes[i][1] > dp[-1]:
                dp.append(envelopes[i][1])
            else:
                idx = lower_bound(dp,envelopes[i][1],0,len(dp))
                dp[idx] = envelopes[i][1]
        return len(dp)
```



##### 368 æœ€å¤§æ•´é™¤å­é›†

>   æ€è·¯ï¼šå’Œæœ€é•¿é€’å¢å­åºåˆ—æ€è·¯ç±»ä¼¼ï¼Œåæš´åŠ›ã€‚

```python
class Solution:
    def largestDivisibleSubset(self, nums: List[int]) -> List[int]:
        # å®šä¹‰dpæ•°ç»„
        # dp[i] = (len,index) è¡¨ç¤ºä»¥iä¸ºç»“å°¾çš„é›†åˆï¼Œæœ€å¤§çš„æ•´é™¤å­é›†çš„é•¿åº¦å’Œä¸Šä¸€ä¸ªä¸‹æ ‡
        nums.sort()
        n = len(nums)
        dp = [[1,-1] for i in range(n)]
        # äºŒç»´éå†
        for i in range(1,n):
            for j in range(i-1,-1,-1):
                if nums[i] % nums[j] == 0:
                    if dp[j][0]+1 > dp[i][0]:
                        dp[i][0] = dp[j][0] + 1
                        dp[i][1] = j
        
        # æ‰¾åˆ°é•¿åº¦æœ€å¤§çš„ä¸‹æ ‡
        max_len,index = dp[0]
        for i in range(1,n):
            if dp[i][0] > max_len:
                index = i
                max_len = dp[i][0]
        
        # å¦‚æœä¸‹æ ‡ä¸º-1ï¼Œè¡¨ç¤ºæœ€é•¿æ•´é™¤å­é›†ä¸º0
        if index == -1: return [nums[0]]
        else:
            # å¦è€…æ„é€ ç­”æ¡ˆ
            ans = collections.deque()
            while index != -1:
                ans.appendleft(nums[index])
                index = dp[index][1]
            return list(ans)
```

##### 376. æ‘†åŠ¨åºåˆ—

>   ![image-20210723205809286](images/image-20210723205809286.png)

```python
class Solution:
    def wiggleMaxLength(self, nums: List[int]) -> int:
        """
        dp[i][0] è¡¨ç¤ºä»¥ç¬¬iä¸ªæ•°ä½ç»“å°¾çš„ï¼Œä¸Šå‡çš„æœ€é•¿æ‘†åŠ¨åºåˆ—
        dp[i][1] è¡¨ç¤ºä»¥ç¬¬iä¸ªæ•°ä½ç»“å°¾çš„ï¼Œä¸‹é™çš„æœ€é•¿æ‘†åŠ¨åºåˆ—
        """
        n = len(nums)
        dp = [[1,1] for i in range(n)]
        for i in range(1,n):
            for j in range(i):
                if nums[j] > nums[i]:
                    dp[i][1] = max(dp[i][1],dp[j][0]+1)
                elif nums[j] == nums[i]:
                    dp[i][1] = max(dp[i][1],dp[j][1])
                    dp[i][0] = max(dp[i][0],dp[j][0])
                else:
                    dp[i][0] = max(dp[i][0],dp[j][1]+1)
        return max(dp[n-1])
```



##### 646. æœ€é•¿æ•°å¯¹é“¾

>   ![image-20211017202635212](images/image-20211017202635212.png)
>
>   æ€è·¯å’Œæœ€é•¿é€’å¢å­åºåˆ—ç±»ä¼¼ï¼Œåªä¸è¿‡éœ€è¦åšä¸€äº›é¢å¤–å¤„ç†

```python
class Solution:
    def findLongestChain(self, pairs: List[List[int]]) -> int:
        n = len(pairs)
        pairs.sort(key=lambda x:[x[0],-x[1]])
        dp = []
        
        def lower_bound(dp,key):
            left,right = 0,len(dp)
            while left < right:
                mid = left + (right-left) // 2
                if dp[mid][0] >= key[0]:
                    right = mid
                else:
                    left = mid + 1
            return left
        for i in range(n):
            if not dp or pairs[i][0] > dp[-1][1]:
                dp.append(pairs[i])
            else:
                index = lower_bound(dp,pairs[i])
                if index == len(dp): index -= 1
                if dp[index][1] > pairs[i][1]:
                    dp[index] = pairs[i]
        return len(dp)
```

å½“ç„¶ä¹Ÿæœ‰ä¸€èˆ¬åšæ³•ï¼š

```python
class Solution:
    def findLongestChain(self, pairs: List[List[int]]) -> int:
        n = len(pairs)
        dp = [0]*(n)
        pairs.sort()
        print(pairs)
        for i in range(n):
            dp[i] = 1
            for j in range(i):
                if pairs[i][0] > pairs[j][1]:
                    dp[i] = max(dp[i],dp[j]+1)
        return dp[n-1]
```



##### 983 æœ€ä½ç¥¨ä»· ğŸ‰

>   æœ€é‡è¦çš„æ€è·¯åœ¨äºå°†ç¦»æ•£çš„`days=[1,3,7]` è½¬åŒ–ä¸ºè¿ç»­çš„ `day=[0,1,0,1,0,0,0,1]`

```python
from typing import *
class Solution:
    def mincostTickets(self, days: List[int], costs: List[int]) -> int:
        """
        target = days[-1] è¿™è¡¨ç¤ºéœ€è¦è®¿é—®çš„æœ€å¤§å¤©æ•°
        dp[i]è¡¨ç¤ºè¾¾åˆ°å½“å‰å¤©æ•°æ‰€éœ€è¦çš„æœ€å°çš„æœ€å°ç¡¬å¸æ•°é‡ 
        """
        target = days[-1]
        last = [1,7,30]
        dp = [0]*(1+target)

        mydays = [0]*(1+target)
        for day in days: mydays[day] = 1
        
        for i in range(1,target+1):
            if mydays[i] == 0:
                dp[i] = dp[i-1]
            else:
                dp[i] = float("inf")
                for j in range(len(last)):
                    k = i-last[j] if i>=last[j] else 0
                    dp[i] = min(dp[k]+costs[j],dp[i])
        return dp[target]
```



æœ€é•¿å…¬å…±å­åºåˆ—è¯æ˜ï¼š

![img](images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDUyMjkzOA==,size_16,color_FFFFFF,t_70-1623239494935)





## 2. äºŒç»´DP

#### 2.1 åŸºæœ¬ç»“æ„

+   ç¬¬ä¸€ç±»ï¼šæš´åŠ›æ³•è§£å†³

```python
for i in range(n):
    for j in range(m):
        if arr[i] == arr[j]:
            dp[i][j] = dp[i][j] + ...
        else:
            dp[i][j] = æœ€å€¼(...)
# (3) ç¬¬äºŒç±»ï¼Œæ¶‰åŠä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚æœ€é•¿å›æ–‡å­åºåˆ—ï¼Œä¹Ÿç§°ä¸ºåŒºé—´DP
# è¿™æ—¶å€™DPæ•°ç»„çš„å«ä¹‰æ˜¯arr[i...j]èŒƒå›´å†…çš„ç»“æœ
```

+   ç¬¬äºŒç±»ï¼Œæ¶‰åŠä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚æœ€é•¿å…¬å…±åºåˆ—

 è¿™æ—¶å€™DPæ•°ç»„çš„å«ä¹‰æ˜¯arr1[i]å’Œarr2[j]çš„ä¸ºç»“å°¾çš„æŸç§å«ä¹‰ã€‚

+   ç¬¬ä¸‰ç±»ï¼Œæ¶‰åŠä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚æœ€é•¿å›æ–‡å­åºåˆ—ï¼Œä¹Ÿç§°ä¸ºåŒºé—´DP

è¿™æ—¶å€™DPæ•°ç»„çš„å«ä¹‰æ˜¯arr[i...j]èŒƒå›´å†…çš„ç»“æœï¼Œå¾€å¾€**æ¶‰åŠåˆ°dpçŠ¶æ€çš„åˆå¹¶å’Œåˆ†è§£**ã€‚



#### 2.2 éå†çš„ä¸‰ç§å½¢å¼

+   é€’å½’å½¢å¼

```python
# é€’å½’å†™æ³•
@functools.lru_cache(None)
def helper(i,j):
    if i > j: return 0
    if i == j: return 1
    if s[i] == s[j]:
        return helper(i+1,j-1)
   	else:
        return max(helper(i+1,j),helper(i,j-1))
```

+   è‡ªåº•å‘ä¸Š

```python
# è¿­ä»£å†™æ³•,ä»ä¸‹åˆ°ä¸Šéå†
i = n - 1
while i >= 0:
    j = i + 1
    while j < n:
        print((i,j),end="")
        j += 1
	print()
    i -= 1

>>> è¾“å‡º
(3, 4)
(2, 3)(2, 4)
(1, 2)(1, 3)(1, 4)
(0, 1)(0, 2)(0, 3)(0, 4)

```

+   æ–œå‘

```python
n = 4
for size in range(1,n+1):
    for i in range(n-size+1):
        j = i + size - 1
        print(i,j)
```

<img src="images/1600677121-aGPcPu-file_1600677121456-1623728087734" alt="img" style="zoom:33%;" />





>   å‚è€ƒé“¾æ¥



![image-20210524202820108](images/image-20210524202820108-1621859302312.png)

>   åŸºæœ¬è®¾å®šï¼š

**åˆå¹¶ï¼š** å°†ä¸¤ä¸ªæˆ–å¤šä¸ªéƒ¨åˆ†è¿›è¡Œæ•´åˆã€‚

**ç‰¹å¾ï¼š** èƒ½å°†é—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸¤åˆå¹¶çš„å½¢å¼

**æ±‚è§£ï¼š**å¯¹æ•´ä¸ªé—®é¢˜è®¾æœ€æœ‰å€¼ï¼Œæšä¸¾åˆå¹¶ç‚¹ï¼Œå°†é—®é¢˜åˆ†è§£ä¸ºå·¦å³ä¸¤ä¸ªéƒ¨åˆ†ã€‚





#### 2.2 å¸¸è§äºŒç»´DP

##### 64. æœ€å°è·¯å¾„å’Œ

æ€è·¯ï¼šçŠ¶æ€å‹ç¼©ï¼Œå°†äºŒç»´å‹ç¼©æˆä¸€ç»´

```python
class Solution:
    def minPathSum(self, grid: List[List[int]]) -> int:
        m = len(grid)
        n = len(grid[0])

        dp = list(itertools.accumulate(grid[0]))

        for i in range(1,m):
            for j in range(n):
                if j == 0:
                    dp[j] += grid[i][j]
                else:
                    dp[j] = min(dp[j-1],dp[j]) + grid[i][j]
        return dp[n-1]
```



##### 97 äº¤é”™å­—ç¬¦ä¸²

>   ![image-20211018160052108](images/image-20211018160052108.png)
>
>   æ€è·¯ï¼šå®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„å³å¯

```python
class Solution:
    def isInterleave(self, s1: str, s2: str, s3: str) -> bool:
        m = len(s1)
        n = len(s2)
        if m+n != len(s3): return False

        """
        dp[i][j] è¡¨ç¤ºs1çš„å‰iä¸ªå’Œs2çš„å‰jä¸ªæ˜¯å¦èƒ½å¤Ÿç»„åˆåœ¨ä¸€èµ·æ„æˆ
        """
        dp = [[False]*(n+1) for i in range(m+1)]
        dp[0][0] = True
        for i in range(1,m+1): 
            dp[i][0] = s1[i-1] == s3[i-1] and dp[i-1][0]

        for j in range(1,n+1): 
            dp[0][j] = s2[j-1] == s3[j-1] and dp[0][j-1]

        for i in range(1,m+1):
            for j in range(1,n+1):
                dp[i][j] = (dp[i-1][j] and s1[i-1] == s3[i+j-1]) or \
                            (dp[i][j-1] and s2[j-1] == s3[i+j-1])
        return dp[m][n]
```



##### 115. ä¸åŒçš„å­åºåˆ—

>   æ€è·¯ï¼šè¿™ä¸€é¢˜å¹¶æ²¡æœ‰è¾¾åˆ°å›°éš¾çš„ç¨‹åº¦ï¼Œæ€è·¯å¾ˆç®€å•ï¼Œå®šä¹‰`dp[i][j]`ä¸ºé•¿åº¦ä¸º`i`çš„`s`åŒ…å«é•¿åº¦ä¸º`j`çš„`t`çš„æ•°é‡ã€‚
>
>   å¦‚æœå½“å‰çš„`i`å’Œ`j`æ‰€ä»£è¡¨çš„å­—ç¬¦ç›¸ç­‰ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©åŒ¹é…ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸åŒ¹é… `dp[i][j]=dp[i-1][j]+dp[i-1][j-1]`ã€‚
>
>   å¦‚æœå½“å‰çš„`i`å’Œ`j`æ‰€ä»£è¡¨çš„å­—ç¬¦ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆåªèƒ½é€‰æ‹©ä¸åŒ¹é… `dp[i][j]=dp[i-1][j-1]`ã€‚
>
>   ![image-20210722170040231](images/image-20210722170040231.png)

```python
class Solution:
    def numDistinct(self, s: str, t: str) -> int:
        """
        å®šä¹‰äºŒç»´dp,
        dp[i][j]è¡¨ç¤º s[:i] å­—ç¬¦ä¸² ä¸­åŒ…å« t[:j] çš„ä¸ªæ•° 
        """
        """
        m,n = len(s),len(t)
        if m == 0 or n == 0: return 0
        dp = [[0]*(n) for i in range(m)]
        dp[0][0] = 1 if s[0] == t[0] else 0
        for i in range(1,m): 
            if s[i] == t[0]: dp[i][0] = dp[i-1][0] + 1
            else: dp[i][0] = dp[i-1][0]

        for i in range(1,m):
            for j in range(1,n):
                if s[i] == t[j]:
                    dp[i][j] = dp[i-1][j-1]
                dp[i][j] += dp[i-1][j]
        return dp[m-1][n-1]
        """
        
        @functools.lru_cache(None)
        def helper(i,j,s,t):
            if i < j: return 0
            if j < 0: return 1
            if i < 0: return 0

            if s[i] == t[j]:
                return helper(i-1,j-1,s,t) + helper(i-1,j,s,t)
            else:
                return helper(i-1,j,s,t)
        m = len(s)
        n = len(t)
        return helper(m-1,n-1,s,t)
```



##### 174 åœ°ä¸‹åŸæ¸¸æˆ ğŸ‰

>   æ€è·¯ï¼šä½“ç°äº†ä¸¤ç§æ€è·¯ï¼Œé€šå¸¸æˆ‘ä»¬çš„æ€è·¯æ˜¯ä»å°†é—®é¢˜ç¼©å°åŒ–ï¼š`dp[i] = dp[i-1] ... `ï¼Œè€Œè¿™é‡Œå®é™…ä¸Šæ˜¯åè¿‡æ¥ï¼š`dp[i] = dp[i+1] ...`
>
>   å®šä¹‰ï¼š`dp[i][j]` è¡¨ç¤ºè¿™ä¸ªå‡½æ•°è¡¨ç¤ºéª‘å£«ä» `(i,j)` **å¼€å§‹**åˆ°ç›®æ ‡ç‚¹ éœ€è¦è€—è´¹çš„æœ€å°çš„ç”Ÿå‘½å€¼
>
>   è¿­ä»£æ–¹ç¨‹ï¼š
>   $$
>   \text{dp}[i][j] + \text{grid}[i][j] = \min(\text{dp}[i+1][j],\text{dp}[i][j+1])
>   $$
>   å¦‚æœï¼š$\text{dp}[i][j]<0,\text{dp}[i][j]=0$ï¼Œå¦åˆ™ $\text{dp}[i][j]>=0,\text{dp}[i][j]$ã€‚
>
>   è€Œå¯¹äº`å¥åº·ç‚¹æ•°ä¸èƒ½ä¸‹é™åˆ°0`è¿™ä¸€æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ€ç»ˆç»“æœä¸ŠåŠ ä¸€ã€‚
>
>   ![image-20210722174834565](images/image-20210722174834565.png)

```python
class Solution:
    def calculateMinimumHP(self, dungeon: List[List[int]]) -> int:
        """
            # dp[i][j] è¿™ä¸ªå‡½æ•°å¯ä»¥ç®—å‡ºéª‘å£«éœ€è¦è€—è´¹çš„æœ€å°çš„ç”Ÿå‘½å€¼
            dp[i][j] + dungeon[i][j] = min(f(i+1,j),f(i,j+1))
        """
        m = len(dungeon)
        n = len(dungeon[0])

        @functools.lru_cache(None)
        def helper(i,j):
            if i >= m or j >= n: return float("inf")
            if i == m-1 and j == n-1: return -min(dungeon[i][j],0)
            
            right = helper(i,j+1)
            down = helper(i+1,j)
            require = min(right,down) - dungeon[i][j]
            
            if require < 0: res = 0
            else: res = require
            return res

        return helper(0,0) + 1
```





##### 221. æœ€å¤§æ­£æ–¹å½¢

>   ![image-20211018170929426](images/image-20211018170929426.png)
>
>   æ€è·¯ï¼šåŠ¨æ€è§„åˆ’ï¼Œè€ƒè™‘å·¦è¾¹å’Œä¸Šé¢çš„å…ƒç´ èƒ½å¦å¸®åŠ©æ„å»ºä¸€ä¸ªæ–°çš„æ­£æ–¹å½¢ã€‚

```python
class Solution:
    def maximalSquare(self, matrix: List[List[str]]) -> int:
        """
        1. dp[i][j]è¡¨ç¤ºä»¥iï¼Œjç»“å°¾çš„æœ€å¤§æ­£æ–¹å½¢
        2. ...
        3.
        if matrix[i][j] == "1":
            edge = min(dp[i-1][j],dp[i][j-1])
            if matrix[i-edge][[j-edge]] == "1":
                dp[i][j] = edge + 1
        4. è¾¹ç•Œè€ƒè™‘ä¸€ä¸‹
        """
        m = len(matrix)
        n = len(matrix[0])
        dp = [[0]*n for _ in range(m)]
        max_edge = 0

        for i in range(m): 
            if matrix[i][0] == "1":
                dp[i][0] = 1
                max_edge = 1
        for i in range(n): 
            if matrix[0][i] == "1":
                dp[0][i] = 1
                max_edge = 1
        
        for i in range(1,m):
            for j in range(1,n):
                if matrix[i][j] == "1":
                    edge = min(dp[i-1][j],dp[i][j-1])
                    dp[i][j] = edge + int(matrix[i-edge][j-edge])
                    max_edge = max(dp[i][j],max_edge)
        
        return max_edge**2
```





##### 583. ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ

```python
class Solution:
    def minDistance(self, word1: str, word2: str) -> int:
        m = len(word1)
        n = len(word2)
        dp = [[0]*(n+1) for i in range(m+1)]
        for i in range(1,m+1):
            dp[i][0] = dp[i-1][0] + 1
        for i in range(1,n+1):
            dp[0][i] = dp[0][i-1] + 1
        for i in range(1,m+1):
            for j in range(1,n+1):
                if word1[i-1] == word2[j-1]:
                    dp[i][j] = dp[i-1][j-1]
                else:
                    dp[i][j] = min(dp[i-1][j],dp[i][j-1]) + 1
        return dp[m][n]
```



##### 650. åªæœ‰ä¸¤ä¸ªé”®çš„é”®ç›˜ ğŸ‰

```latex
dp[i] = \min \{dp[i],dp[j]+i/j\}ï¼Œæ‰¾åˆ°æœ€å¤§è´¨å› æ•°
```

```python
class Solution:
    def minSteps(self, n: int) -> int:
        dp = [0]*(n+1)
        for i in range(2,n+1):
            dp[i] = i
            for j in range(1,i//2):
                if i % j == 0:
                    dp[i] = min(dp[i],dp[j]+i//j)
        return dp[n]
```

##### 1143. æœ€é•¿å…¬å…±å­åºåˆ—

```python
class Solution:
    def longestCommonSubsequence(self, text1: str, text2: str) -> int:
        """ã€‚
        1. dp[i][j]è¡¨ç¤ºçš„å«ä¹‰æ˜¯text1ä¸­ä»¥ç¬¬iä¸ªå…ƒç´ ä¸ºç»“å°¾ã€‚text2ä¸­ä»¥ç¬¬jä¸ªå…ƒç´ ä¸ºç»“å°¾çš„æœ€é•¿å…¬å…±å­åºåˆ—
        2. iè¡¨ç¤ºçš„æ˜¯ç¬¬iä¸ªå…ƒç´ 
        3. çŠ¶æ€è½¬ç§»æ–¹ç¨‹
        dp[i][j] = dp[i-1][j-1] + 1 if t1[i-1] == t2[j-1]
        dp[i][j] = max(dp[i][j-1],dp[i-1][j]) if t1[i-1] != t2[j-1]
        """
        m = len(text1)
        n = len(text2)
        
        dp = [[0]*(n+1) for _ in range(m+1)]

        for i in range(1,m+1):
            for j in range(1,n+1):
                if text1[i-1] == text2[j-1]:
                    dp[i][j] = dp[i-1][j-1] + 1
                else:
                    dp[i][j] = max(dp[i-1][j],dp[i][j-1])
        return dp[-1][-1]
```



#### 2.3 åŒºé—´DP

##### 887 é¸¡è›‹æ‰è½é—®é¢˜ ğŸ‰

>   ![image-20210728115140000](images/image-20210728115140000-1627444301368.png)
>
>   åŠ¨æ€è§„åˆ’æ€æƒ³ï¼š
>
>   ç›¸å½“ä¸äºï¼Œæˆ‘åœ¨ç¬¬iå±‚ä¸¢äº†ä¸€ä¸ªé¸¡è›‹ï¼Œæœ‰ä¸¤ç§å¯èƒ½ï¼Œä¸€ç§æ˜¯ç¢äº†ï¼Œä¸€ç§æ²¡ç¢ã€‚
>
>   + ç¢äº†ï¼Œé‚£ä¹ˆ$f$ è‚¯å®šåœ¨ä¸‹é¢ï¼Œ`helper(K-1,i-1)`
>   + æ²¡æœ‰ç¢ï¼Œé‚£ä¹ˆ$f$â€‹â€‹â€‹ è‚¯å®šåœ¨ä¸Šé¢ï¼ˆåŒ…å«ï¼‰ï¼Œå½“å‰é¸¡è›‹æ¥ç€ç”¨ï¼Œ`helper(K,N-i)`

```python
class Solution:
    def superEggDrop(self, K: int, N: int) -> int:
        @functools.lru_cache(None)
        def helper(K,N):
            """
            @param K: è¡¨ç¤ºæœ‰kä¸ªé¸¡è›‹
            @param N: è¡¨ç¤ºæ¥¼å±‚æ•°
            @return: è¡¨ç¤ºè¿”å›çš„æ“ä½œæ•°
            """
            if N == 0 or N == 1 or K == 1:
                return N
            minimun = N
            for i in range(1,N+1):
                tMin = max(helper(K-1,i-1),helper(K,N-i))
                minimun = min(minimun,1+tMin) # åŠ ä¸Šä¸€ä»£è¡¨å½“å‰è¿™ä¸€æ¬¡
            return minimun
        
        return helper(K,N)
```

```python
class Solution:
    def superEggDrop(self, K: int, N: int) -> int:
        # dp[k][m]è¡¨ç¤ºkä¸ªé¸¡è›‹åœ¨mæ­¥å†…å¯ä»¥æµ‹å‡ºçš„æœ€å¤šçš„å±‚æ•°
        # çœ‹æˆæ˜¯èƒŒåŒ…é—®é¢˜ï¼Œ
        dp = [[0]*(N+1) for i in range(K+1)]
        for m in range(1,N+1):
            dp[0][m] = 0
            for k in range(1,K+1):
                dp[k][m] = dp[k][m-1] + dp[k-1][m-1] + 1 # æ‘”ç¢äº† + æ²¡æ‘”ç¢ + å½“å‰æ¥¼å±‚
                if dp[k][m] >= N: return m

        # print(dp)
        return N
```



##### 5 æœ€é•¿å›æ–‡å­ä¸²

>   é™¤äº†å¯ä»¥ç”¨ä¸­å¿ƒæ‰©æ•£ç®—æ³•ï¼Œè¿˜å¯ä»¥ç”¨åŒºé—´DPã€‚å®šä¹‰`dp[i][j]`ä¸ºæ˜¯å¦å¯ä»¥æ„æˆä»¥`i`ä¸ºå¼€å§‹,`j`ä¸ºç»“å°¾çš„å›æ–‡å­ä¸²ã€‚

```python
class Solution:
    def longestPalindrome(self, s: str) -> str:
        dp = [[0]*len(s) for _ in range(len(s))]
        for i in range(len(s)):
            dp[i][i] = 1
        
        ans = [0,0]
        max_val = 0
        i = len(s) - 2
        while i >= 0:
            j = i + 1
            while j < len(s):
                if s[i] == s[j]:
                    if i == j-1:
                        dp[i][j] = 2
                    else:
                        dp[i][j] = (dp[i+1][j-1] + 2) if dp[i+1][j-1] > 0 else 0
                else:
                    dp[i][j] = 0
                if max_val < dp[i][j]:
                    ans = [i,j]
                    max_val = dp[i][j]
                j += 1
            i -= 1
        return "" if not ans else s[ans[0]:ans[1]+1]
```



##### 87. æ‰°ä¹±å­—ç¬¦ä¸²

>    æ€è·¯ï¼šå®šä¹‰dpæ•°å­—ï¼Œ`dp[i][j][len]`å®šä¹‰ä¸ºå­—ç¬¦ä¸²`s1`ä»`i`å¼€å§‹ï¼Œ`s2`ä»`j`å¼€å§‹ï¼Œåé¢é•¿åº¦ä¸º`len`çš„å­—ç¬¦æ˜¯å¦èƒ½å½¢æˆæ‰°ä¹±å­—ç¬¦ä¸²ï¼ˆäº’ä¸ºç¿»è½¬ï¼‰ã€‚è¿™é‡Œéœ€è¦å››å±‚å¾ªç¯ï¼Œæœ€å¤–å±‚å¾ªç¯ç”¨æ¥éå†é•¿åº¦`len`ï¼Œç„¶åä¸¤å±‚å¾ªç¯ç”¨æ¥éå†`i`å’Œ`j`ï¼Œæœ€åä¸€å±‚å¾ªç¯ç”¨æ¥éå†`k`ï¼Œç”¨æ¥è¡¨ç¤ºç¿»è½¬çš„ä½ç½®ä¸‹æ ‡ã€‚
>
>    ![image-20210723162639608](images/image-20210723162639608-1627028801045.png)

```python
class Solution:
    def isScramble(self, s1: str, s2: str) -> bool:
        @functools.lru_cache(None)
        def helper(s1,s2):
            if len(s1) != len(s2): return False
            if s1 == s2: return True
            if collections.Counter(s1) != collections.Counter(s2): return False
            
            for i in range(1,len(s1)):
                if helper(s1[:i],s2[:i]) and helper(s1[i:],s2[i:]):
                    return True
                
                if helper(s1[:i],s2[-i:]) and helper(s1[i:],s2[:-i]):
                    return True
            
            return False
        
        return helper(s1,s2)
```



##### 312 æˆ³æ°”çƒ

>   æ€è·¯ï¼šdpæ•°ç»„çš„å®šä¹‰å¾ˆé‡è¦ï¼Œ`dp[i][j]`è¡¨ç¤ºçš„å«ä¹‰æ˜¯åœ¨ä¸æˆ³ç ´`i`å’Œ`j`çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è·å¾—çš„æœ€å¤§åˆ†æ•°ã€‚ä½†æ˜¯è¿™ä¸€é¢˜ç”¨åŠ¨æ€è§„åˆ’åšæœ€å¤§çš„é—®é¢˜æ˜¯æ—¶é—´å¤æ‚åº¦è¾¾åˆ°äº†`O(n^3)`ï¼Œpythonä¼šè¶…æ—¶ã€‚
>
>   ![image-20210723162820866](images/image-20210723162820866-1627028902539.png)

<img src="images/dp-1623760451993.png" alt="img" style="zoom: 33%;" />

```python
class Solution:
    def maxCoins(self, nums: List[int]) -> int:
        """
        dp[i][j]è¡¨ç¤ºä¸å«iå’Œjçš„æœ€å¤§ç¡¬å¸
        """
        nums = [1] + nums + [1]
        n = len(nums)
        dp = [[0]*(n) for i in range(n)]
        
        for le in range(1,n+1):
            for i in range(0,n-le+1):
                j = i + le - 1
                for k in range(i+1,j):
                    dp[i][j] = max(dp[i][j],dp[i][k]+dp[k][j]+nums[i]*nums[j]*nums[k])
        # for row in dp:
        #     print(row)
        return dp[0][n-1]
```



##### 516. æœ€é•¿å›æ–‡å­åºåˆ—

æ€è·¯ï¼šåŒºé—´DPé—®é¢˜ï¼Œå¦‚æœ`s[i]==s[j],dp[i][j]=dp[i+1][j-1]+2`ï¼›å¦‚æœ`s[i]!=s[j],dp[i][j]=max(dp[i+1][j],dp[i][j-1])`ã€‚å…³é”®åœ¨äºåŒºé—´DPæ›´æ–°çš„å†™æ³•ã€‚åŒºé—´ç±»å‹çš„é—®é¢˜ï¼Œå¯ä»¥é€‰æ‹©ä¸¤ç§éå†æ–¹å¼ï¼Œä¸€ç§å®ç°æ–œç€è¿›è¡Œéå†ï¼ˆå·¦è¾¹ï¼‰ï¼Œä¸€ç§æ˜¯ä»ä¸‹åˆ°ä¸Šè¿›è¡Œéå†ï¼ˆå³è¾¹ï¼‰ã€‚

```python
class Solution:
    def longestPalindromeSubseq(self, s: str) -> int:
        """
        å­åºåˆ—ä¸è¦æ±‚è¿ç»­
        dp[i][j]è¡¨ç¤ºä»ç¬¬iä¸ªå­—ç¬¦åˆ°ç¬¬jä¸ªå­—ç¬¦çš„æœ€é•¿å›æ–‡å­åºåˆ—
        """
        n = len(s)
        dp = [[0]*n for i in range(n)]
        for i in range(n): dp[i][i] = 1

        for length in range(2,n+1):
            for i in range(n-length+1):
                j = i + length - 1
                if s[i] == s[j]:
                    dp[i][j] = dp[i+1][j-1] + 2
                else:
                    dp[i][j] = max(dp[i+1][j],dp[i][j-1])
        return dp[0][-1]
```



##### 546. ç§»é™¤ç›’å­ ğŸ‰

>   `dp[left][right][k]: ` ä»`[left, right]`ä¸­ç§»é™¤é¢œè‰²ç›¸åŒçš„ç›’å­ï¼Œ`right`å³è¾¹æœ‰ `k` ä¸ªå’Œ `boxes[right]` é¢œè‰²ç›¸åŒçš„ç›’å­ï¼Œæ‰€è·å¾—çš„åˆ†æ•°

![image-20210616125933921](images/image-20210616125933921-1623819575672.png)

```python
# ä¾èµ–äº å…¨éƒ¨çš„é•¿åº¦1 åŠ å°¾éƒ¨çŠ¶æ€
class Solution:
    def removeBoxes(self, boxes: List[int]) -> int:
        n = len(boxes)
        dp = [[[0]*n for _ in range(n)] for _ in range(n)]
        
        def calculatePoints(boxes,left,right,k):
            """
            dp[left][right][k] è¡¨ç¤ºçš„æ˜¯ï¼š
            [left,right]èŒƒå›´å†…ï¼Œå³è¾¹æœ‰kä¸ªæ•°å’Œnums[right]ç›¸ç­‰ï¼Œå¹¶ä¸”å³è¾¹å…¶ä»–çš„æ•°éƒ½å·²é€‰å–
            ç­–ç•¥ä¸€ï¼šä»[left, right], æˆ‘ä»¬å¯ä»¥å…ˆç§»é™¤å³è¾¹çš„é¢œè‰²ç›¸åŒçš„ k + 1 ä¸ªç›’å­, å†ç§»é™¤ [left, right - 1] çš„ç›’å­
            ç­–ç•¥äºŒï¼š
            æšä¸¾ iï¼Œ left <= i <= right - 1, æ‰¾åˆ° boxes[i] == boxes[right],
                å…ˆç§»é™¤å³åŠéƒ¨åˆ†[i + 1, right - 1]ä¸­çš„ç›’å­ï¼Œ ä¸º dp[i + 1][right - 1][0]
                å†ç§»é™¤å·¦åŠéƒ¨åˆ†[left, i]ä¸­çš„ç›’å­ï¼Œ ä¸º dp[left][i][k + 1]

            """
            if left > right: return 0
            if dp[left][right][k] == 0:
                # ç­–ç•¥1
                dp[left][right][k] = calculatePoints(boxes,left,right-1,0) + (k+1)**2

                # ç­–ç•¥2
                for i in range(left,right):
                    if boxes[i] == boxes[right]:
                        dp[left][right][k] = max(dp[left][right][k],
                            calculatePoints(boxes,left,i,k+1)+
                                            calculatePoints(boxes,i+1,right-1,0))

            return dp[left][right][k]
        return calculatePoints(boxes,0,n-1,0)
```



##### 664 å¥‡æ€ªçš„æ‰“å°æœº ğŸ‰

æ€è·¯ï¼šå®šä¹‰`dp[i][j]`ä¸º`i`åˆ°`j`çš„éœ€è¦æ‰“å°çš„æœ€å°‘æ¬¡æ•°ã€‚

```python
ç¬¬ä¸€ç§æƒ…å†µï¼šs[i] == s[j]ï¼Œé‚£ä¹ˆæ‰“å°æ¬¡æ•°ç­‰äºå­é—®é¢˜ï¼Œdp[i+1][j]
ç¬¬äºŒç§æƒ…å†µï¼Œs[i] != s[j]ï¼Œé‚£ä¹ˆæ‰“å°æ¬¡æ•°ç­‰äºéå†åˆ†è£‚ä¸‹æ ‡éå†, dp[i][j] = min({dp[i][k],dp[k+1][j]},k=i,...,j-1)
```

```python
class Solution:
    def strangePrinter(self, s: str) -> int:
        if not s: return 0
        N = len(s)
        dp = [[float("inf")]*N for i in range(N)]
        for i in range(N):
            dp[i][i] = 1
        for i in range(N-1,-1,-1):
            for j in range(i+1,N):
                if s[i] == s[j]:
                    dp[i][j] = min(dp[i][j],dp[i+1][j])
                else:
                    for k in range(i,j):
                        dp[i][j] = min(dp[i][j],dp[i][k]+dp[k+1][j])

        return dp[0][-1]
```



##### 730 ç»Ÿè®¡ä¸åŒå›æ–‡å­åºåˆ— ğŸ‰ğŸ‰

>   ![image-20211018193434033](images/image-20211018193434033.png)
>
>   æ€è·¯ï¼š
>
>   ```latex
>   dp[i][j]å®šä¹‰ä¸ºåœ¨åŒºé—´iï¼Œjå†…å«æœ‰å¤šå°‘ä¸ªå›æ–‡å­ä¸²ã€‚
>   å¦‚æœ S[i] == S[j]ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦åˆ¤æ–­[i, j]è¿™ä¸€æ®µä¸­æœ‰å¤šå°‘å­—ç¬¦ä¸S[i]ä¸ç›¸ç­‰
>   	+ å¦‚æœä¸­é—´æ²¡æœ‰å’ŒS[i]ç›¸åŒçš„å­—æ¯ï¼Œä¾‹å¦‚"aba"è¿™ç§æƒ…å†µï¼Œdp[i][j] = dp[i + 1][j - 1] * 2 + 2;ï¼ˆdp[i][j] = dp[i + 1][j - 1] * 2 ä»£è¡¨çš„dp[i + 1[j - 1]è¿™ä¸€æ®µå¯ä»¥ç‹¬ç«‹å­˜åœ¨ï¼Œä¹Ÿå¯åœ¨å¤–å±‚åŒ…è£¹S[i],S[j]ï¼Œæ‰€æœ‰éœ€è¦x2ï¼Œè€Œ2æ˜¯ä»£è¡¨â€œaaâ€å’Œâ€œaâ€ï¼‰
>   	+ å¦‚æœä¸­é—´åªæœ‰ä¸€ä¸ªå’ŒS[i]ç›¸åŒçš„å­—æ¯ï¼Œå°±æ˜¯"aaa"è¿™ç§æƒ…å†µï¼Œdp[i][j] = dp[i + 1][j - 1] * 2 + 1;ï¼ˆx2ä¸ä¸Šé¢æƒ…å†µç›¸åŒï¼ŒåŠ ä¸€å•ç‹¬è®¡ç®—"aa",è€Œâ€œaâ€åœ¨dp[i + 1][j - 1] ä¸­è®¡ç®—è¿‡äº†ï¼‰
>   	+ å¦åˆ™ä¸­é—´è‡³å°‘æœ‰ä¸¤ä¸ªå’ŒS[i]ç›¸åŒçš„å­—æ¯ï¼Œå°±æ˜¯"aabaa"è¿™ç§æƒ…å†µï¼Œdp[i][j] = dp[i + 1][j - 1] * 2 - dp[left + 1][right - 1];ï¼ˆleftã€rightè¯·è§ä»£ç æ³¨é‡Šï¼Œdp[left + 1][right - 1]è¿™ä¸€æ®µé‡å¤è®¡ç®—äº†ï¼‰
>   å¦åˆ™dp[i][j] = dp[i][j - 1] + dp[i + 1][j] - dp[i + 1][j - 1];
>   
>   ```


ä»£ç 

```python
class Solution:
    def countPalindromicSubsequences(self, S: str) -> int:
        n = len(S)
        dp = [[0]*n for _ in range(n)]
        for i in range(n):
            dp[i][i] = 1
        i = n - 1
        while i >= 0:
            j = i + 1
            while j < n:
                if S[i] != S[j]: # å·¦è¾¹å­—ç¬¦ä¸ç­‰äºå³è¾¹å­—ç¬¦ï¼Œåˆ™å®¹æ–¥åŸç†
                    dp[i][j] = dp[i+1][j] + dp[i][j-1] - dp[i+1][j-1]
                else:
                    dp[i][j] = dp[i+1][j-1] * 2
                    l,r = i+1,j-1
                    while l <= r and S[l] != S[i]: l += 1 # ä»å·¦å‘å³æ‰¾åˆ°ç¬¬ä¸€ä¸ªç­‰äºs[i]çš„
                    while l <= r and S[r] != S[i]: r -= 1 # ä»å³å‘å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªç­‰äºs[i]çš„

                    if l > r: dp[i][j] += 2 # è¯´æ˜ä¸­é—´æ²¡æœ‰ç­‰äºs[i]çš„
                    elif l == r: dp[i][j] += 1 # è¯´æ˜åªæœ‰ä¸€ä¸ªç­‰äºs[i]çš„
                    else: dp[i][j] -= dp[l+1][r-1] # è¯´æ˜æœ‰ä¸¤ä¸ªç­‰äºs[i]çš„
                dp[i][j] %= 1000000007
                j += 1
            i -= 1
        return dp[0][-1]
```



##### 1000. åˆå¹¶çŸ³å¤´çš„æœ€ä½æˆæœ¬ ğŸ‰ğŸ‰

>   ![image-20211018194447651](images/image-20211018194447651.png)
>
>   åŒºé—´DP

```java
class Solution:
    def mergeStones(self, stones: List[int], K: int) -> int:
        //  åŠ¨æ€è§„åˆ’
        //  å®šä¹‰çŠ¶æ€: f[i][j][k] è¡¨ç¤ºå°† [i, j] åŒºé—´çš„çŸ³å¤´ç¼©å°æˆ k å †çš„æœ€å°ä½“åŠ›èŠ±è´¹
        //  åˆæ³•çŠ¶æ€: j-i+1 >= k
        //  æœ€ç»ˆç­”æ¡ˆ: f[0][n-1][1]
        //  çŠ¶æ€è½¬ç§»: æƒ³è¦æŠŠ [i, j] åŒºé—´çš„åˆå¹¶æˆ 1 å †, é‚£ä¹ˆå®ƒçš„ä¸Šä¸€ä¸ªçŠ¶æ€ä¸€å®šæ˜¯ K å †
        //           f[i][j][1] = f[i][j][K] + sum(i, j)
        //           è€Œå¯¹äºé 1 çš„æƒ…å†µ, å³ f[i][j][k], æˆ‘ä»¬éœ€è¦è€ƒè™‘ä» i å¼€å§‹çš„å¤šé•¿çš„åŒºé—´æœ€ç»ˆåˆå¹¶æˆ 1 å †f[i][j][k] = min{ f[i][j'][1] + f[j'+1][j][k-1]
        n=len(stones)
        if n < 2: return 0
        if n < K or (n-K)%(K-1): return -1
        prefix=[0]
        for s in stones: prefix.append(prefix[-1]+s)
        
        @lru_cache(None)
        def dp(i,j,m):
            if m == j-i+1: return 0 # æ— éœ€åˆå¹¶
            if m == 1: return dp(i,j,K)+prefix[j+1]-prefix[i]
            res = float('inf')
            for ni in range(i,j):
                res=min(res,dp(i,ni,1)+dp(ni+1,j,m-1))
            return res
        return dp(0,n-1,1)

```

##### 1039 å¤šè¾¹ä¸‰è§’å½¢çš„æœ€ä¼˜å‰–åˆ†

>   æ€»ç»“ï¼šæ€»çš„æ¥è¯´å°±è¿™ä¹ˆä¸€ä¸ªå…¬å¼ï¼š
>
>   ![image-20210705162123429](images/image-20210705162123429-1625473285508.png)

<img src="images/7b5e87eae4bc9758884aa4bc3690f09e473ae6046ad29427b4a43e1ba135d602-è¡¨æ ¼.PNG" alt="è¡¨æ ¼.PNG" style="zoom:67%;" />

```python
class Solution:
    def minScoreTriangulation(self, values: List[int]) -> int:
        n = len(values)
        MAX_VAL = float("inf")
        if n == 3: return values[0]*values[1]*values[2]
        dp = [[MAX_VAL]*n for i in range(n)]

        # å¤„ç†é•¿åº¦ä¸º2çš„æƒ…å†µ
        for i in range(n-1):
            dp[i][i+1] = 0

        # å¤„ç†é•¿åº¦ä¸º3åŠä»¥ä¸Šçš„æƒ…å†µ
        for length in range(2,n+1):
            for i in range(n-length):
                j = i + length
                for k in range(i+1,j):
                    dp[i][j] = min(dp[i][j],dp[i][k]+dp[k][j]+values[i]*values[k]*values[j])
        
        return dp[0][n-1]     
```



##### 486. é¢„æµ‹èµ¢å®¶

>   ![image-20210906164258484](images/image-20210906164258484.png)
>
>   åŒºé—´ + åšå¼ˆDP
>
>   å–å·§æ€è·¯ï¼Œå¦‚æœå…ƒç´ çš„ä¸ªæ•°ä¸ºå¶æ•°ä¸ªï¼Œé‚£ä¹ˆå…ˆæ‰‹å¿…èµ¢ã€‚

```python
class Solution:
    def PredictTheWinner(self, nums: List[int]) -> bool:
        n = len(nums)
        dp = [[[0,0] for i in range(n)] for j in range(n)]
        for i in range(n): dp[i][i] = [nums[i],0]

        for size in range(2,n+1):
            for i in range(n-size+1):
                j = i + size - 1
                
                if dp[i][j-1][1]+nums[j] > dp[i+1][j][1]+nums[i]:
                    dp[i][j][0] = dp[i][j-1][1]+nums[j]
                    dp[i][j][1] = dp[i][j-1][0]
                else:
                    dp[i][j][0] = dp[i+1][j][1]+nums[i]
                    dp[i][j][1] = dp[i+1][j][0]
                    
        return dp[0][n-1][0] >= dp[0][n-1][1]
```



## 3. æ•°å­¦ç›¸å…³ DP



#### 3.2 é¢˜ç›®

##### 62. ä¸åŒè·¯å¾„ `æœºå™¨äºº`

æ€è·¯ï¼šè¿™ç±»é¢˜ç›®ä¸è¦ç”¨`dfs`ï¼Œå› ä¸º`dfs`å¾ˆå®¹æ˜“çˆ†ã€‚



##### 343 æ•´æ•°æ‹†åˆ†

>    æ€è·¯ï¼šå°†ä¸€ä¸ªæ•´æ•°`n`æ‹†åˆ†æˆ`a`ä¸ªå°æ•°å­—ï¼Œç­‰ä»·äºï¼š
>   $$
>   n=n_1\times n_2 \times ... \times n_a
>   $$
>   å¹¶ä½¿å¾—:
>   $$
>   max(n_1\times n_2 \times \dots \times n_a)
>   $$
>   é€šè¿‡æ•°å­¦æ¨å¯¼ï¼Œå¯ä»¥å¾—åˆ°ä¼˜æ‹†åˆ†ç‚¹ä¸º3ã€‚
>
>   è¿™ä¸€é¢˜åœ¨äºå¯¹dpæ•°ç»„é€’æ¨ä»¥åŠ`base-case`çš„ç†è§£ï¼š`dp[i]=max{dp[j],max{dp[j]*(i-j),j*(i-j)}`ã€‚å¦‚æœä¸€ä¸ªæ•°å°äºç­‰äº3ï¼Œé‚£ä¹ˆå¯¹å…¶è¿›è¡Œåˆ†è§£ï¼Œå¾—åˆ°çš„ç»“æœä¸€å®šå°äº3ï¼›æ‰€ä»¥åœ¨è®¡ç®—`dp[i]`çš„æ—¶å€™ï¼Œå¦‚æœ`i`è¢«åˆ†å‰²æˆä¸¤éƒ¨åˆ†ï¼Œè€ŒæŸä¸€éƒ¨åˆ†çš„å€¼æ˜¯å°äºç­‰äºä¸‰çš„ï¼Œåº”è¯¥ç›´æ¥ç”¨jä»£æ›¿ï¼Œè€Œä¸æ˜¯ç”¨dp[j]ã€‚è€Œ`base-case`å°±æ˜¯`dp[1]=1`ã€‚

```python
class Solution:
    def integerBreak(self, n: int) -> int:
        if n <= 3: return n-1
        dp = [0]*(1+n)
        dp[:3] = [0,1,2,3]
        for i in range(4,n+1):
            for j in range(1,i//2+1):
                dp[i] = max(dp[i-j]*dp[j],dp[i])
            i += 1 
        return dp[n]
```

é™¤æ­¤ä¹‹å¤–ï¼Œå¯ä»¥åˆ©ç”¨æ•°å­¦æ–¹æ³•æ±‚è§£ï¼š

```python
class Solution:
    def integerBreak(self, n: int) -> int:
        if n <= 3: return n-1
        a,b = n//3,n%3
        if b == 0: return 3**a
        elif b == 1: return 3**(a-1)*4
        else: return 3**a*2
```





## 4 åšå¼ˆå‹DP

#### 4.2 é¢˜ç›®

#### 877 çŸ³å­æ¸¸æˆ

>   æ€è·¯ï¼š
>
>   ```txt
>   dp[i][j].fir = max(piles[i] + dp[i+1][j].sec, piles[j] + dp[i][j-1].sec)
>   dp[i][j].fir = max(    é€‰æ‹©æœ€å·¦è¾¹çš„çŸ³å¤´å †     ,     é€‰æ‹©æœ€å³è¾¹çš„çŸ³å¤´å †     )
>   # è§£é‡Šï¼šæˆ‘ä½œä¸ºå…ˆæ‰‹ï¼Œé¢å¯¹ piles[i...j] æ—¶ï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼š
>   # è¦ä¹ˆæˆ‘é€‰æ‹©æœ€å·¦è¾¹çš„é‚£ä¸€å †çŸ³å¤´ï¼Œç„¶åé¢å¯¹ piles[i+1...j]
>   # ä½†æ˜¯æ­¤æ—¶è½®åˆ°å¯¹æ–¹ï¼Œç›¸å½“äºæˆ‘å˜æˆäº†åæ‰‹ï¼›
>   # è¦ä¹ˆæˆ‘é€‰æ‹©æœ€å³è¾¹çš„é‚£ä¸€å †çŸ³å¤´ï¼Œç„¶åé¢å¯¹ piles[i...j-1]
>   # ä½†æ˜¯æ­¤æ—¶è½®åˆ°å¯¹æ–¹ï¼Œç›¸å½“äºæˆ‘å˜æˆäº†åæ‰‹ã€‚
>   
>   if å…ˆæ‰‹é€‰æ‹©å·¦è¾¹:
>       dp[i][j].sec = dp[i+1][j].fir
>   if å…ˆæ‰‹é€‰æ‹©å³è¾¹:
>       dp[i][j].sec = dp[i][j-1].fir
>   # è§£é‡Šï¼šæˆ‘ä½œä¸ºåæ‰‹ï¼Œè¦ç­‰å…ˆæ‰‹å…ˆé€‰æ‹©ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š
>   # å¦‚æœå…ˆæ‰‹é€‰æ‹©äº†æœ€å·¦è¾¹é‚£å †ï¼Œç»™æˆ‘å‰©ä¸‹äº† piles[i+1...j]
>   # æ­¤æ—¶è½®åˆ°æˆ‘ï¼Œæˆ‘å˜æˆäº†å…ˆæ‰‹ï¼›
>   # å¦‚æœå…ˆæ‰‹é€‰æ‹©äº†æœ€å³è¾¹é‚£å †ï¼Œç»™æˆ‘å‰©ä¸‹äº† piles[i...j-1]
>   # æ­¤æ—¶è½®åˆ°æˆ‘ï¼Œæˆ‘å˜æˆäº†å…ˆæ‰‹ã€‚
>   ```

```python
class Solution:
    def stoneGame(self, piles: List[int]) -> bool:
        n = len(piles)
        dp = [[[0,0] for _ in range(n)] for _ in range(n)]
        for i in range(n):
            dp[i][i] = [piles[i],0] # åˆ†åˆ«ä»£è¡¨å…ˆæ‰‹å’Œåæ‰‹æ‰€èƒ½è·å¾—çš„æœ€å¤§å€¼
        
        for length in range(2,n+1):a
            for i in range(0,n-length+1):
                j = i + length - 1
                left = dp[i+1][j][1]+piles[i] # å½“å‰å…ˆæ‰‹ï¼Œé€‰å–å·¦è¾¹
                right = dp[i][j-1][1]+piles[j] # å½“å‰å…ˆæ‰‹ï¼Œé€‰å–å³è¾¹
                if left > right:
                    dp[i][j][0] = left
                    dp[i][j][1] = dp[i+1][j][0]
                else:
                    dp[i][j][0] = right
                    dp[i][j][1] = dp[i][j-1][0]
        return dp[0][-1][0] > dp[0][-1][1]
```



#### çŸ³å­åˆå¹¶



#### çŸ©é˜µä¹˜æ³•

## 5. çŠ¶æ€è½¬åŒ–DP

#### 5.1 æ•´ä½“ç»“æ„





#### 5.2 é¢˜ç›®

##### è‚¡ç¥¨ç³»åˆ—é—®é¢˜

+   121 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº



+   188 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV

```309 python
class Solution:
    def maxProfit(self, k: int, prices: List[int]) -> int:
        # dp[i][k][u]è¡¨ç¤ºç¬¬iå¤©ï¼Œåˆ°è¿™å¤©ä¸ºæ­¢æœ€å¤šè¿›è¡Œkæ¬¡äº¤æ˜“ï¼Œæ‰‹ä¸Šæœ‰æ— è‚¡ç¥¨ï¼Œæ—¶çš„æœ€å¤§æ”¶ç›Š 
        n = len(prices)
        if n <= 1 or k == 0: return 0

        k += 1# æœ€å¤šè¿›è¡Œkæ¬¡äº¤æ˜“ kå–å€¼ä¸º0,1,2è¡¨ç¤ºæˆªæ­¢åˆ°æŸå¤©æœ€å¤šè¿›è¡Œ0æ¬¡ 1æ¬¡ 2æ¬¡æ—¶çš„æœ€å¤§æ”¶ç›Š
        dp = [[[0,0] for _ in range(k)] for _ in range(n)]
        for i in range(k):# ç¬¬0å¤©æ— è®ºæœ€å¤šè¿›è¡Œå‡ æ¬¡äº¤æ˜“ï¼Œæ‰‹é‡Œåˆ†åˆ«æœ‰è‚¡ç¥¨å’Œæ²¡è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦å¦‚ä¸‹
            dp[0][i][0]=0
            dp[0][i][1]=-prices[0]
            
        for j in range(n):# ä»»ä½•å¤©ï¼Œåªè¦æ˜¯æœ€å¤šäº¤æ˜“0æ¬¡ï¼Œé‚£ä¹ˆæœ€å¤§æ”¶ç›Šå°±æ˜¯0ï¼›æ‰‹é‡Œæœ‰è‚¡ç¥¨æ˜¯ä¸å¯èƒ½çš„
            dp[j][0][0]=0
            dp[j][0][1]=float('-INF')
        for i in range(1,n):
            for j in range(1,k):
                dp[i][j][0]=max(dp[i-1][j][0],dp[i-1][j][1]+prices[i])
                dp[i][j][1]=max(dp[i-1][j][1],dp[i-1][j-1][0]-prices[i])
        return dp[n-1][k-1][0]
```

+   309 æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ

    >   ![image-20210723115931216](images/image-20210723115931216.png)



##### 1262. å¯è¢«ä¸‰æ•´é™¤çš„æœ€å¤§å’Œ

æ€è·¯ï¼šè¿™ä¸€é¢˜å¯ä»¥æ‹“å±•åˆ°`å¯ä»¥è¢«kæ•´é™¤çš„æœ€å¤§å’Œ`ï¼Œå…³é”®è¿˜æ˜¯åœ¨äºçŠ¶æ€çš„å®šä¹‰ï¼Œä¸€å…±æœ‰ä¸‰ç§å¯èƒ½çš„çŠ¶æ€ï¼š

```python
# ä»¥å½“å‰æ•°ä¸ºç»“å°¾ï¼Œå¯ä»¥è¢«1æ•´é™¤çš„æœ€å¤§å’Œ
# ä»¥å½“å‰æ•°ä¸ºç»“å°¾ï¼Œå¯ä»¥è¢«2æ•´é™¤çš„æœ€å¤§å’Œ
# ä»¥å½“å‰æ•°ä¸ºç»“å°¾ï¼Œå¯ä»¥è¢«3æ•´é™¤çš„æœ€å¤§å’Œ
```

è¿™ç§çŠ¶æ€å’Œè‚¡ç¥¨ã€æœ€å¤§ä¹˜ç§¯ç­‰é¢˜ç›®å…·æœ‰ç±»ä¼¼çš„å«ä¹‰ï¼Œå…³é”®åœ¨äºæ‰¾åˆ°æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€ä»¥åŠå¯¹åº”çš„çŠ¶æ€è½¬æ¢å…³ç³»ã€‚è€Œè¿™ä¸€é¢˜çš„çš„é‡ç‚¹ä¹‹ä¸€æ ¹æ®å½“å‰æ•°ä¸`k`ç›¸ä½™çš„å…³ç³»ï¼Œå®šä¹‰çŠ¶æ€ä¸çŠ¶æ€ä¹‹é—´çš„è½¬æ¢ã€‚

```python
from typing import *
class Solution:
    def maxSumDivThree(self, nums: List[int]) -> int:
        """
        dp[i][0] è¡¨ç¤ºä»¥ç¬¬iä¸ªæ•°ç»“å°¾æ—¶ï¼Œä½™0çš„æœ€å¤§å’Œ
        dp[i][1] è¡¨ç¤ºä»¥ç¬¬iä¸ªæ•°ç»“å°¾æ—¶ï¼Œä½™1çš„æœ€å¤§å’Œ
        dp[i][2] è¡¨ç¤ºä»¥ç¬¬iä¸ªæ•°ç»“å°¾æ—¶ï¼Œä½™2çš„æœ€å¤§å’Œ
        """
        n = len(nums)
        dp = [[0,0,0] for i in range(n+1)]
        dp[0] = [0,float("-inf"),float("-inf")]
        
        for i in range(1,n+1):
            cur = nums[i-1] % 3
            if cur == 0:
                dp[i][0] = max(dp[i-1][0] + nums[i-1],dp[i-1][0])
                dp[i][1] = max(dp[i-1][1] + nums[i-1],dp[i-1][1])
                dp[i][2] = max(dp[i-1][2] + nums[i-1],dp[i-1][2])
            elif cur == 1:
                dp[i][0] = max(dp[i-1][2] + nums[i-1],dp[i-1][0])
                dp[i][1] = max(dp[i-1][0] + nums[i-1],dp[i-1][1])
                dp[i][2] = max(dp[i-1][1] + nums[i-1],dp[i-1][2])
            else: 
                dp[i][0] = max(dp[i-1][1] + nums[i-1],dp[i-1][0])
                dp[i][1] = max(dp[i-1][2] + nums[i-1],dp[i-1][1])
                dp[i][2] = max(dp[i-1][0] + nums[i-1],dp[i-1][2])
        return dp[n][0]
```



##### 1371 æ¯ä¸ªå…ƒéŸ³åŒ…å«å¶æ•°æ¬¡æœ€é•¿å­å­—ç¬¦ä¸² ğŸ‰

>   æ€è·¯ï¼šå¼‚æˆ–å‰ç¼€å’Œï¼Œ`dp[i]=k`çš„å®šä¹‰æ˜¯è¡¨ç¤ºçš„æ˜¯ä¸‹æ ‡å€¼ä¸º`k`çš„æ—¶å€™ï¼Œ`i`å¯¹åº”çš„äºŒè¿›åˆ¶éƒ½å‡ºç°äº†å¥‡æ•°æ¬¡
>
>   ` dp[pattern=10] = 8 è¡¨ç¤ºçš„å«ä¹‰æ˜¯ä¸‹æ ‡å€¼ä¸º8çš„æ—¶å€™ï¼Œeå’Œoéƒ½å‡ºç°äº†å¥‡æ•°æ¬¡(10=01010)ã€‚`

```python
from typing import *
class Solution:
    def findTheLongestSubstring(self, s: str) -> int:
        """
        dp[pattern=10] = 8 è¡¨ç¤ºçš„å«ä¹‰æ˜¯ä¸‹æ ‡å€¼ä¸º8çš„æ—¶å€™ï¼Œeå’Œoéƒ½å‡ºç°äº†å¥‡æ•°æ¬¡(10=01010)ã€‚
        """
        dp = [float("inf")]*32
        dp[0] = -1 # è¾¹ç•Œæ¡ä»¶
        n = len(s)
        cur = 0
        ans = 0

        for i in range(n):
            if s[i] == 'a': cur ^= 1
            elif s[i] == 'e': cur ^= 2
            elif s[i] == 'i': cur ^= 4
            elif s[i] == 'o': cur ^= 8
            elif s[i] == 'u': cur ^= 16
            
            if dp[cur] == float("inf"): 
                # è®°å½•ç¬¬ä¸€æ¬¡å‡ºç°è¿™ç§çŠ¶æ€çš„ä¸‹æ ‡
                dp[cur] = i 
            else: 
                # è¡¨ç¤ºå½“å‰ä¸‹æ ‡çš„çŠ¶æ€æ˜¯curï¼Œç¬¬ä¸€æ¬¡çŠ¶æ€ä¸ºcurçš„ä¸‹æ ‡
                ans = max(ans,i-dp[cur])
        return ans
```



##### 1186. åˆ é™¤ä¸€æ¬¡å¾—åˆ°å­æ•°ç»„æœ€å¤§å’Œ ğŸ‰

>   ![image-20210725190425632](images/image-20210725190425632.png)
>
>   **è®¾ç½®å­æ•°ç»„ä¸­å¯ä»¥åˆ é™¤å…ƒç´ æ•°é‡ä¸ºï¼šk**

```python
# å¦‚æœk=1
class Solution:
    def maximumSum(self, arr: List[int]) -> int:
        """
        è®¾ç½®å­æ•°ç»„ä¸­å¯ä»¥åˆ é™¤å…ƒç´ æ•°é‡ä¸ºï¼šk
        dp[i][0]è¡¨ç¤ºåˆ°å½“å‰å…ƒç´ ä½ç½®ï¼Œæ²¡æœ‰åˆ é™¤å…ƒç´ è·å¾—çš„æœ€å¤§æ”¶ç›Š
        dp[i][1]è¡¨ç¤ºåˆ°å½“å‰å…ƒç´ ä½ç½®ï¼Œåˆ é™¤ä¸€ä¸ªå…ƒç´ è·å¾—çš„æœ€å¤§æ”¶ç›Š
        """
        K = 1
        n = len(arr)
        dp = [[0]*(K+1) for i in range(n)]
       	dp[0] = [0,float("-inf")]
        
        ans = arr[0]
        for i in range(1,n):
            dp[i][0] = max(arr[i],dp[i-1][0]+arr[i])
            dp[i][1] = max(dp[i-1][0], dp[i-1][1] + arr[i])
            ans = max(max(dp[i]),ans)

        return ans
    
# å¦‚æœkå¤§äº1
class Solution:
    def maximumSum(self, arr: List[int]) -> int:
        """
        è®¾ç½®å­æ•°ç»„ä¸­å¯ä»¥åˆ é™¤å…ƒç´ æ•°é‡ä¸ºï¼šk
        dp[i][0]è¡¨ç¤ºåˆ°å½“å‰å…ƒç´ ä½ç½®ï¼Œæ²¡æœ‰åˆ é™¤å…ƒç´ è·å¾—çš„æœ€å¤§æ”¶ç›Š
        dp[i][1]è¡¨ç¤ºåˆ°å½“å‰å…ƒç´ ä½ç½®ï¼Œåˆ é™¤ä¸€ä¸ªå…ƒç´ è·å¾—çš„æœ€å¤§æ”¶ç›Š
        """
        K = 1
        n = len(arr)
        dp = [[0]*(K+1) for i in range(n)]
        for i in range(K):
            dp[i] = [arr[0]]*((i+1)) + [float("-inf")]*(n-i-1)
        
        ans = arr[0]
        for i in range(1,n):
            dp[i][0] = max(arr[i],dp[i-1][0]+arr[i])
            for k in range(K,0,-1):
                dp[i][k] = max(dp[i-1][k-1], dp[i-1][k] + arr[i])
            ans = max(max(dp[i]),ans)
        
        return ans
```



## 6 æ ‘å‹DP

#### 124 äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ

>   ![image-20210722174127922](images/image-20210722174127922.png)

```python
class Solution:
    def maxPathSum(self, root: TreeNode) -> int:
        self.ans = float("-inf")
        def helper(root):
            if not root: return 0
            left = helper(root.left)
            right = helper(root.right)
            self.ans = max(self.ans,max(left,0) + max(right,0) + root.val)
            return max(max(left,right),0) + root.val
        helper(root)
        return self.ans
```

#### 337. æ‰“å®¶åŠ«èˆ III

>   ![image-20210725200306077](images/image-20210725200306077.png)

```python
class Solution:
    def rob(self, root: TreeNode) -> int:

        def helper(root):
            if not root: return 0,0 
            l1,l2 = helper(root.left) # è¿”å›çš„æ˜¯æ‰“åŠ«å’Œä¸æ‰“åŠ«çš„æ”¶ç›Š
            r1,r2 = helper(root.right)
            return root.val+l2+r2,max(l1,l2)+max(r1,r2) # è¿™ä¸€æ­¥æ˜¯å…³é”®ï¼Œå¯ä»¥æ‰“åŠ«ä¹Ÿå¯ä»¥ä¸æ‰“åŠ«
        
        return max(helper(root))
```



## 5. èƒŒåŒ…é—®é¢˜

#### 5.1 åŸºæœ¬å› ç´ 

[ã€å®«æ°´ä¸‰å¶ã€‘è¯¦è§£å®Œå…¨èƒŒåŒ…ä¸€ç»´ç©ºé—´ä¼˜åŒ–æ¨å¯¼ï¼ˆé™„èƒŒåŒ…é—®é¢˜æ”»ç•¥ï¼‰](https://leetcode-cn.com/problems/perfect-squares/solution/gong-shui-san-xie-xiang-jie-wan-quan-bei-nqes/)

+   **ç‰©å“æ˜¯å¦å¯ä»¥é‡å¤ä½¿ç”¨**

å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå®Œå…¨èƒŒåŒ…é—®é¢˜ã€‚ä¸å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œ0-1èƒŒåŒ…é—®é¢˜ã€‚

+   **æ˜¯å¦è€ƒè™‘æ”¾å…¥èƒŒåŒ…çš„é¡ºåº**

è€ƒè™‘é¡ºåºï¼Œç‰©å“æ”¾åœ¨å†…éƒ¨ï¼›ä¸è€ƒè™‘é¡ºåºï¼Œç‰©å“æ”¾åœ¨å¤–éƒ¨ã€‚

è€ƒè™‘é¡ºåºçš„å«ä¹‰æ˜¯ï¼š`[1,2,2]`å’Œ`[2,1,1]`æ˜¯ä¸¤ä¸ªä¸åŒçš„è§£ï¼Œè€Œä¸è€ƒè™‘é¡ºåºåˆ™è¡¨ç¤ºä¸¤è€…æ˜¯ç›¸åŒçš„è§£ã€‚

|                | **å¯ä»¥é‡å¤ä½¿ç”¨** | **ä¸å¯ä»¥é‡å¤ä½¿ç”¨** |
| :------------: | :--------------: | :----------------: |
|  **è€ƒè™‘é¡ºåº**  |      **1**       |       **2**        |
| **ä¸è€ƒè™‘é¡ºåº** |      **3**       |       **4**        |

+   **1 è€ƒè™‘é¡ºåº** & **å¯ä»¥é‡å¤ä½¿ç”¨** 

```java
for(int i = 1; i <= n; i++) { // æ€»ä»·å€¼
    for(int coin: coins) {    // å•†å“
        if(i - coin < 0) break;
        dp[i] = (dp[i] + dp[i - coin]) % 1000000007; // 
    }
}
```

 [377. ç»„åˆæ€»å’Œ â…£](https://leetcode-cn.com/problems/combination-sum-iv/)ï¼Œ[é¢è¯•é¢˜ 08.11. ç¡¬å¸](https://leetcode-cn.com/problems/coin-lcci/)ï¼Œ

+   **2 è€ƒè™‘é¡ºåº** & **ä¸å¯ä»¥é‡å¤ä½¿ç”¨** **ğŸ‰æš‚æ—¶æ²¡æœ‰é‡åˆ°**

```java

```

+   **3 ä¸è€ƒè™‘é¡ºåº & å¯ä»¥é‡å¤ä½¿ç”¨**

```python
for i in range(m): # å•†å“
    dp[i][0] = 1
    for j in range(1,n+1): # æ€»ä»·å€¼
        if j < coins[i]: dp[i][j] = dp[i-1][j]
            else:
                dp[i][j] = (dp[i-1][j-coins[i]] + dp[i-1][j]) % MAX
```

+   **4 ä¸è€ƒè™‘é¡ºåº & ä¸å¯ä»¥é‡å¤ä½¿ç”¨**

```python
for i in range(m): # å•†å“
    dp[i][0] = 1
    for j in range(1,n+1): # æ€»ä»·å€¼
        if j < coins[i]: dp[i][j] = dp[i-1][j]
            else:
                dp[i][j] = (dp[i-1][j-coins[i]]) % MAX
```





TODO èƒŒåŒ…é—®é¢˜

https://leetcode-cn.com/problems/combination-sum-iv/solution/xi-wang-yong-yi-chong-gui-lu-gao-ding-bei-bao-wen-/

https://leetcode-cn.com/problems/coin-change/solution/yi-pian-wen-zhang-chi-tou-bei-bao-wen-ti-sq9n/

#### 1. ç»„åˆé—®é¢˜ 

+   æœ‰é¡ºåºï¼Œæœ‰é¡ºåºæ„å‘³ç€æ•°æ®çš„é¡ºåºä»£è¡¨ä¸åŒç­”æ¡ˆï¼Œæ¯”å¦‚`[1,1,2]`å’Œ`[1,2,1]`è¡¨ç¤ºä¸åŒç»“æœï¼Œè¿™æ—¶å€™å†™æ³•ä¸€èˆ¬`target`åœ¨å¤–, `nums` åœ¨å†…ã€‚

##### 377. ç»„åˆæ€»å’Œ â…£

>   **å¯ä»¥`é‡å¤ä½¿ç”¨`& `è€ƒè™‘é¡ºåº`**
>
>   æ€è·¯ï¼šå®šä¹‰dp[i]æ•°ç»„çš„å«ä¹‰ä¸ºï¼Œå’Œä¸ºiçš„ç»„åˆæ€»å’Œçš„æ•°é‡ï¼Œç”±äºè€ƒè™‘é¡ºåºï¼Œæ‰€ä»¥å¯ä»¥å¾—åˆ°ï¼š

```python
class Solution:
    def combinationSum4(self, nums: List[int], target: int) -> int:
        n = len(nums)
        dp = [0]*(target+1)
        dp[0] = 1
        for i in range(1,target+1):
            for num in nums:
                if i >= num:
                    dp[i] += dp[i-num]
        return dp[target]
```



+   è€ƒè™‘é¡ºåºï¼Œæ„å‘³ç€é¡ºåºä¸å¯¹æœ€ç»ˆç»“æœäº§ç”Ÿå½±å“ï¼Œè¿™æ—¶å€™å†™æ³•ä¸€èˆ¬`nums`åœ¨å¤–, `target` åœ¨å†…ã€‚

##### 518. é›¶é’±å…‘æ¢ II

>   **å¯ä»¥`é‡å¤ä½¿ç”¨`& `ä¸è€ƒè™‘é¡ºåº`**

```python
class Solution:
    def change(self, amount: int, coins: List[int]) -> int:
        n = len(coins)
        dp = [0]*(amount+1)
        dp[0] = 1
        for i in range(1,n+1):
            for j in range(coins[i-1],amount+1):
                dp[j] += dp[j-coins[i-1]]
        return dp[amount]
```



##### 474. ä¸€å’Œé›¶

>   å¯ä»¥`ä¸å¯é‡å¤ä½¿ç”¨`& `ä¸è€ƒè™‘é¡ºåº`
>
>   æ€è·¯ï¼šæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª0-1èƒŒåŒ…é—®é¢˜ï¼Œåªä¸è¿‡ç”¨äº†äºŒç»´çš„èµ„æºè€Œå·²ï¼Œè¿™é‡Œç›¸å½“äºä»`ä¸‰ç»´`å‹ç¼©åˆ°`äºŒç»´`ã€‚
>
>   ![image-20210725195708635](images/image-20210725195708635.png)

```python
class Solution:
    def findMaxForm(self, strs: List[str], m: int, n: int) -> int:
        def helper(s):
            dicts = collections.Counter(s)
            return [dicts["0"],dicts["1"]]

        dp = [[0]*(n+1) for i in range(m+1)]
        size = len(strs)
        counts = [helper(s) for s in strs]

        for k in range(size):
            for i in range(m,counts[k][0]-1,-1):
                for j in range(n,counts[k][1]-1,-1):
                    dp[i][j] = max(dp[i][j],dp[i-counts[k][0]][j-counts[k][1]]+1)
        
        return dp[m][n]
```



##### 1155 æ·éª°å­çš„Nç§æ–¹æ³• ğŸ‰

>   ![image-20210726103356155](images/image-20210726103356155.png)
>
>   ä¸è€ƒè™‘é¡ºåº

```python
class Solution:
    def numRollsToTarget(self, d: int, f: int, target: int) -> int:
        MAX = 1000000007
        if d*f < target: return 0

        dp = [[0]*(target+1) for i in range(d)] # æ³¨æ„ä¸èƒ½åˆå§‹åŒ–target=0çš„æƒ…å†µ
        for i in range(1,f+1):
            if i <= target:
                dp[0][i] = 1
        
        for i in range(1,d):
            for j in range(1,target+1):
                size = f if j >= f else j
                for k in range(j-1,j-1-size,-1):
                    dp[i][j] = (dp[i][j] + dp[i-1][k]) % MAX
        return dp[d-1][target]
```



##### 139. å•è¯æ‹†åˆ†

>   ![image-20210726194347164](images/image-20210726194347164.png)

```python
class Solution:
    def wordBreak(self, s: str, wordDict: List[str]) -> bool:
        len_set = set()
        for word in wordDict: len_set.add(len(word))
        len_set = list(len_set)
        len_set.sort()
        wordDict = set(wordDict)

        n = len(s)
        dp = [False]*(n+1)
        dp[0] = True # è¡¨ç¤ºé•¿åº¦ä¸º0
        for i in range(1,n+1):
            for length in len_set:
                if i < length: break
                else:
                    if s[i-length:i] in wordDict:
                        dp[i] = dp[i] or dp[i-length]
        return dp[n]
```



##### 140 å•è¯æ‹†åˆ† II

>   æ€è·¯ï¼šè¿™ä¸€é¢˜åªè¦ç”¨å›æº¯å³å¯ï¼Œå¯¹äºä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œåˆ©ç”¨139é¢˜çš„ä»£ç ï¼Œåˆ¤æ–­æ•°æ®æ˜¯å¦å¯åˆ†å‰²å³å¯ã€‚
>
>   ![image-20210726202032745](images/image-20210726202032745-1627302034417.png)

```python
class Solution:
    def wordBreak(self, s: str, wordDict: List[str]) -> List[str]:
        # å¦‚æœå¯ä»¥æ‹†åˆ†ï¼Œæ£€æŸ¥ç­”æ¡ˆ
        wordSet = set(wordDict)
        self.ans = []
        def helper(start,s,path):
            if start >= len(s): 
                self.ans.append(" ".join(path))
                return
                
            for i in range(start,len(s)):
                if s[start:i+1] in wordSet:
                    helper(i+1,s,path+[s[start:i+1]])
        helper(0,s,[])
        return self.ans
```





##### 279. å®Œå…¨å¹³æ–¹æ•°

>   ![image-20210726202342673](images/image-20210726202342673.png)

```python
class Solution:
    def numSquares(self, n: int) -> int:
        dp = [0]*(n+1)

        for i in range(1,n+1):
            dp[i] = i
            j = 1
            while j*j <= i:
                dp[i] = min(dp[i],dp[i-j*j]+1)
                j += 1
        return dp[n]
```





##### 650. åªæœ‰ä¸¤ä¸ªé”®çš„é”®ç›˜

>   ç¬¬ä¸€ç§æ€è·¯ï¼Œå¦‚æœiå¯ä»¥è¢«jå¤åˆ¶ï¼Œé‚£ä¹ˆ`dp[i]=dp[j]+i//j`ï¼Œä½†æ˜¯ç»†èŠ‚é—®é¢˜å¾ˆéº»çƒ¦ã€‚

```python
import math
class Solution:
    def minSteps(self, n: int) -> int:
        if n == 1: return 0
        dp = [n]*(n+1)
        dp[1] = 0
        for i in range(3,n+1):
            for j in range(1,i):
                if i%j == 0:
                    dp[i] = min(dp[i],dp[j]+i//j)
        return dp[n]
```

>   ç¬¬äºŒç§æ€è·¯ï¼Œå°†iè¿›è¡Œå› ç´ åˆ†è§£ï¼Œæ¯”å¦‚i=20ï¼Œé‚£ä¹ˆiå¯ä»¥è¢«åˆ†è§£ä¸º`i=2*2*5`ï¼Œæ‰€ä»¥`dp[i]=9`

```python
import math
class Solution:
    def minSteps(self, n: int) -> int:
        dp = [0]*(n+1)
        for i in range(2,n+1):
            dp[i] = i # å¦‚æœè¿™ä¸ªæ•°æ˜¯ç´ æ•°ï¼Œé‚£ä¹ˆ`dp[i]=i`
            for j in range(2,i+1):
                if i % j == 0:
                    dp[i] = dp[j] + dp[i//j]
                    break
        return dp[n]
```

>   ç¬¬ä¸‰ç§è§£æ³•ï¼Œé€’å½’è§£æ³•
>
>   +   å¦‚æœ `n` æ˜¯ç´ æ•°çš„è¯ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡å¤åˆ¶ä¸€æ¬¡Aï¼Œç„¶åç²˜è´´n-1æ¬¡çš„æ–¹å¼æ‰èƒ½å¾—åˆ°nä¸ªA
>   +   å¦‚æœ `n=i*j`çš„åŒ–ï¼Œæœ€å¿«å¾—åˆ°nçš„æ–¹å¼æ˜¯å…ˆå¾—åˆ°iï¼Œå¤åˆ¶1æ¬¡ï¼Œç„¶åå†ç²˜è´´j-1æ¬¡ã€‚

```python
import functools
class Solution:
    @functools.lru_cache(None)
    def minSteps(self, n: int) -> int:
        if n == 1:
            return 0
        for i in range(2, n):
            if n % i == 0:
                return self.minSteps(n // i) + self.minSteps(i)
        return n
```





#####  1049. æœ€åä¸€å—çŸ³å¤´çš„é‡é‡ II & VIVOè¿çŸ¿çŸ³ ğŸ‰ ğŸ‰

>   è¿™ä¸¤é¢˜çš„æœ€å¤§å·®å¼‚åœ¨äº1049é¢˜ä¸è¦æ±‚ä¸¤å †çŸ³å¤´çš„æ•°é‡æœ€å¤§å·®ä¸€ï¼Œè€ŒVIVOè¦æ±‚ä¸¤ä¸ªçŸ¿çŸ³çš„å·®å€¼ä¸èƒ½è¶…è¿‡ä¸€ã€‚

+   1049

åŸºæœ¬çš„æ€æƒ³æ˜¯ï¼Œdp[i]å®šä¹‰ï¼Œè¦æ±‚åœ¨æœ€å¤§å®¹é‡ä¸ºæ€»å®¹é‡çš„ä¸€åŠæ—¶å€™ï¼Œèƒ½å¦æ”¾ä¸‹çš„æœ€å¤§çŸ³å¤´é‡é‡ã€‚

```python
nowclass Solution:
    def lastStoneWeightII(self, stones: List[int]) -> int:
        total_weight = sum(stones)
        target = total_weight >> 1
        n = len(stones)

        dp = [0]*(target+1) # dp[i]å®šä¹‰å®¹é‡ä¸ºiçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ”¾ä¸‹çŸ³å¤´çš„æœ€å¤§é‡é‡
        for stone in stones:
            for i in range(target,stone-1,-1):
                dp[i] = max(dp[i],dp[i-stone]+stone)
        return total_weight - 2*dp[target]

```

æˆ–è€…å®šä¹‰`dp[i][j]`è¡¨ç¤ºç”¨äº†iå—çŸ³å¤´ï¼Œæ˜¯å¦èƒ½è¾¾åˆ°é‡é‡ä¸ºj; å¦‚æœèƒ½ï¼Œé‚£çœ‹iæ˜¯å¦ä¸ºæ€»çŸ³å¤´æ•°é‡ä¸€åŠ

```python
def solution(data):
    """
    ç»™å®šä¸€ä¸ªæ•°ç»„dataï¼Œå°†dataåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œè¦æ±‚ä¸¤éƒ¨åˆ†çš„æ•°é‡ç›¸ç­‰ï¼Œå¹¶ä¸”å·®å€¼æœ€å°
    ä¾‹å­ï¼š
    è¾“å…¥ï¼š[3,7,4,11,8,10]
    è¾“å‡ºï¼š[3,7,11] & [4,8,10]
    åŠ¨æ€è§„åˆ’ï¼š
    dp[i][j],è¡¨ç¤ºç”¨äº†iå—çŸ³å¤´ï¼Œæ˜¯å¦èƒ½è¾¾åˆ°é‡é‡ä¸ºj; å¦‚æœèƒ½ï¼Œé‚£çœ‹iæ˜¯å¦ä¸ºæ€»çŸ³å¤´æ•°é‡ä¸€åŠ
    """
    total = sum(data)
    n = len(data)
        
    half_n = n >> 1
    half_w = total >> 1
    diff = total + 1 # æœ€å¤§å·®å€¼
    
    dp = [[False]*(total+1) for _ in range(n+1)]
    dp[0][0] = True
    weight = 0
    
    for i in range(n): # 
        for j in range(total,data[i]-1,-1):
            for k in range(i-1,-1,-1): # kè¡¨ç¤ºçš„æ˜¯æ•°é‡è€Œéä¸‹æ ‡
                if dp[k][j-data[i]]:
                    dp[k+1][j] = True
                    if abs(j-half_w) < diff: # 1049ï¼Œä¸è¦æ±‚æ•°å€¼å·®ä¸€
                        diff = abs(j-half_w)
                        weight = j
    return abs(total-2*weight)
```



+   VIVO è¿çŸ¿çŸ³

```python
def solution(data):
    """
    ç»™å®šä¸€ä¸ªæ•°ç»„dataï¼Œå°†dataåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œè¦æ±‚ä¸¤éƒ¨åˆ†çš„æ•°é‡ç›¸ç­‰ï¼Œå¹¶ä¸”å·®å€¼æœ€å°
    ä¾‹å­ï¼š
    è¾“å…¥ï¼š[3,7,4,11,8,10]
    è¾“å‡ºï¼š[3,7,11] & [4,8,10]
    åŠ¨æ€è§„åˆ’ï¼š
    dp[i][j],è¡¨ç¤ºç”¨äº†iå—çŸ³å¤´ï¼Œæ˜¯å¦èƒ½è¾¾åˆ°é‡é‡ä¸ºj; å¦‚æœèƒ½ï¼Œé‚£çœ‹iæ˜¯å¦ä¸ºæ€»çŸ³å¤´æ•°é‡ä¸€åŠ
    """
    total = sum(data)
    n = len(data)
        
    half_n = n >> 1
    half_w = total >> 1
    diff = total + 1 # æœ€å¤§å·®å€¼
    
    dp = [[False]*(total+1) for _ in range(n+1)]
    dp[0][0] = True
    weight = 0
    
    for i in range(n): # yo
        for j in range(total,data[i]-1,-1):
            for k in range(i-1,-1,-1): # kè¡¨ç¤ºçš„æ˜¯æ•°é‡è€Œéä¸‹æ ‡
                if dp[k][j-data[i]]:
                    dp[k+1][j] = True
                    if (k+1 == half_n) and abs(j-half_w) < diff:  # vivo è¦æ±‚æ•°å€¼å·®ä¸€
                        diff = abs(j-half_w)
                        weight = j
    return abs(total-2*weight)
```





##### 689. ä¸‰ä¸ªæ— é‡å å­æ•°ç»„çš„æœ€å¤§å’Œ ğŸ‰

>   ![image-20210725123927628](images/image-20210725123927628.png)
>
>   æ€è·¯ï¼šèƒŒåŒ…é—®é¢˜ + å‰ç¼€å’Œ





#### èƒŒåŒ…ç³»åˆ—

[416. åˆ†å‰²ç­‰å’Œå­é›†](https://leetcode-cn.com/problems/partition-equal-subset-sum/)

[322. é›¶é’±å…‘æ¢](https://leetcode-cn.com/problems/coin-change/)

[494. ç›®æ ‡å’Œ](https://leetcode-cn.com/problems/target-sum/)







#### 403. é’è›™è¿‡æ²³ ğŸ‰

>   ![image-20211019112807013](images/image-20211019112807013.png)
>
>   æ€è·¯ï¼š

```python
# 1. å®šä¹‰åŠ¨æ€è§„åˆ’æ•°ç»„ï¼šdp[i][k]è¡¨ç¤ºèƒ½å¦åœ¨è·³è·ƒkä¸ªçŸ³å¤´åï¼Œåˆ°è¾¾ç¬¬iä¸ªçŸ³å¤´
# 2. ä¸‹æ ‡çš„å«ä¹‰ï¼šè·³è·ƒkä¸ªçŸ³å¤´åï¼Œåˆ°è¾¾ç¬¬iä¸ªçŸ³å¤´
# 3. è½¬ç§»æ–¹ç¨‹ï¼šdp[i][k]ä¸dp[j][k-1],dp[j][k],dp[j][k+1]çš„å€¼æœ‰å…³
# dp[j][k-1]ï¼Œå…ˆæ˜¯ç»è¿‡k-1çš„è·³è·ƒåˆ°è¾¾ä½ç½®jï¼Œå†åœ¨åŸæ­¥é•¿çš„åŸºç¡€ä¸Š+1ï¼Œè·³åˆ°ä½ç½®i
# dp[j][k]çŠ¶æ€è€Œæ¥ï¼šå…ˆæ˜¯ç»è¿‡ k çš„è·³è·ƒåˆ°è¾¾ä½ç½® jï¼Œç»´æŒåŸæ­¥é•¿ä¸å˜ï¼Œè·³åˆ°äº†ä½ç½®i
# dp[j][k+1]ï¼Œå…ˆæ˜¯ç»è¿‡ k + 1 çš„è·³è·ƒåˆ°è¾¾ä½ç½® jï¼Œå†åœ¨åŸæ­¥é•¿çš„åŸºç¡€ä¸Š -1ï¼Œè·³åˆ°äº†ä½ç½® iã€‚
# 4. åˆå§‹åŒ–, dp[0][0] = True
```

```python
class Solution:
    def canCross(self, stones: List[int]) -> bool:
        n = len(stones)
        dp = [[0]*n for _ in range(n)]
        dp[0][0] = True

        for i in range(1,n):
            for j in range(i):
                k = stones[i] - stones[j]
                if k <= j+1:
                    dp[i][k] = dp[j][k-1] or dp[j][k] or dp[j][k+1]
        return any(dp[-1])
```





#### 740. åˆ é™¤å¹¶è·å¾—ç‚¹æ•°

æ€è·¯ï¼šæ‰“å®¶åŠ«èˆ



#### 1723. å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´

æ€è·¯ï¼šDFSåŠ ä¸Šå‰ªæã€‚æˆ–è€…ã€‚çŠ¶æ€å‹ç¼©DPã€‚



#### 1269. åœåœ¨åŸåœ°çš„æ–¹æ¡ˆæ•°

æ€è·¯ï¼šå®šä¹‰dpæ•°ç»„ï¼Œ`dp[steps][index]`ï¼Œ`steps`è¡¨ç¤ºæ­¥æ•°ï¼Œ`index`è¡¨ç¤ºä¸‹æ ‡ã€‚





#### 943 æœ€çŸ­è¶…çº§ä¸² ğŸ‰

>   ![image-20210725164437524](images/image-20210725164437524.png)
>
>   æ•°ä½DPï¼Œè¿›è¡Œ`çŠ¶æ€å‹ç¼©`

```python
class Solution {
    /**
     * ç±»ä¼¼çš„æ€æƒ³å°±æ˜¯TSPé—®é¢˜ã€‚
     * dp[s][i] è¡¨ç¤ºçŠ¶æ€ä¸ºsï¼Œå¹¶ä»¥içŠ¶æ€ä¸ºç»“å°¾çš„æœ€çŸ­é•¿åº¦ã€‚
     * çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š
     */
    public String shortestSuperstring(String[] words) {
        int n = words.length;
        int [][] graph = new int[n][n];
        build_graph(graph,words);

        int [][] dp = new int[1<<n][n]; // ç¬¬ä¸€ä¸ªç»´åº¦è¡¨ç¤ºçŠ¶æ€ï¼Œç¬¬äºŒä¸ªç»´åº¦è¡¨ç¤ºå…ƒç´ ä¸‹æ ‡
        int [][] path = new int[1<<n][n]; // è¡¨ç¤ºå½“å‰çš„çˆ¶èŠ‚ç‚¹
        for (int i = 0; i < path.length; i++) Arrays.fill(path[i],-1);
        int min = Integer.MAX_VALUE;
        int last = -1;

        for (int curState = 1; curState < (1<<n); curState++) {
            Arrays.fill(dp[curState],Integer.MAX_VALUE / 2);

            for (int curNode = 0; curNode < n; curNode++) {
                if ((curState&(1 << curNode)) == 0) continue; // æ˜¯å¦è®¿é—®è¿‡
                int prevState = curState ^ (1 << curNode);
                if (prevState == 0) {
                    dp[curState][curNode] = words[curNode].length();
                } else {
                    for (int prevNode = 0; prevNode < n; prevNode++) {
                        if(dp[prevState][prevNode] + graph[prevNode][curNode] < 
                                dp[curState][curNode]) {
                            dp[curState][curNode] = dp[prevState][prevNode] + graph[prevNode][curNode];
                            path[curState][curNode] = prevNode;
                        }
                    }
                }

                if ((curState == (1<<n)-1) && dp[curState][curNode] < min) {
                    min = dp[curState][curNode];
                    last = curNode;
                }
            }
        }

        StringBuilder sb = new StringBuilder();
        int s = (1 << n) - 1;

        while (s > 0) {
            int prevNode = path[s][last];
            if (prevNode == -1) {
                sb.insert(0,words[last]);
            } else {
                sb.insert(0,words[last].substring(words[last].length()-graph[prevNode][last]));
            }

            s = s ^ (1 << last);
            last = prevNode;
        } 
        return sb.toString();
    }

    public void build_graph(int [][] graph, String [] words) {
        for (int i = 0; i < words.length; i++) {
            for (int j = 0; j < words.length; j++) {
                boolean find = false;
                for (int index = 0; index < words[i].length(); index++) {
                    if((words[j]).startsWith(words[i].substring(index))) {
                        graph[i][j] = words[j].length() - (words[i].length() - index);
                        find = true;
                        break;
                    }
                }
                if (!find) {
                    graph[i][j] = words[j].length();
                }
            }
        }
    }
}
```

####

## 1. 0/1 Knapsack, 0/1èƒŒåŒ…ï¼Œ6ä¸ªé¢˜

0/1 Knapsackï¼Œ0/1èƒŒåŒ…é—®é¢˜

Equal Subset Sum Partitionï¼Œç›¸ç­‰å­é›†åˆ’åˆ†é—®é¢˜

Subset Sumï¼Œå­é›†å’Œé—®é¢˜

Minimum Subset Sum Differenceï¼Œå­é›†å’Œçš„æœ€å°å·®é—®é¢˜

Count of Subset Sumï¼Œç›¸ç­‰å­é›†å’Œçš„ä¸ªæ•°é—®é¢˜

Target Sumï¼Œå¯»æ‰¾ç›®æ ‡å’Œçš„é—®é¢˜

## 2. Unbounded Knapsackï¼Œæ— é™èƒŒåŒ…ï¼Œ5ä¸ªé¢˜

Unbounded Knapsackï¼Œæ— é™èƒŒåŒ…

Rod Cuttingï¼Œåˆ‡é’¢æ¡é—®é¢˜

Coin Changeï¼Œæ¢ç¡¬å¸é—®é¢˜

Minimum Coin Changeï¼Œå‡‘é½æ¯ä¸ªæ•°éœ€è¦çš„æœ€å°‘ç¡¬å¸é—®é¢˜

Maximum Ribbon Cutï¼Œä¸å¸¦çš„æœ€å¤§å€¼åˆ‡æ³•

## 3. Fibonacci Numbersï¼Œæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œ6ä¸ªé¢˜

Fibonacci numbersï¼Œæ–æ³¢é‚£å¥‘æ•°åˆ—é—®é¢˜

Staircaseï¼Œçˆ¬æ¥¼æ¢¯é—®é¢˜

Number factorsï¼Œåˆ†è§£å› å­é—®é¢˜

Minimum jumps to reach the endï¼Œè›™è·³æœ€å°æ­¥æ•°é—®é¢˜

Minimum jumps with feeï¼Œè›™è·³å¸¦æœ‰ä»£ä»·çš„é—®é¢˜

House thiefï¼Œå·æˆ¿å­é—®é¢˜

## 4. Palindromic Subsequenceï¼Œå›æ–‡å­ç³»åˆ—ï¼Œ5ä¸ªé¢˜

Longest Palindromic Subsequenceï¼Œæœ€é•¿å›æ–‡å­åºåˆ—

Longest Palindromic Substringï¼Œæœ€é•¿å›æ–‡å­å­—ç¬¦ä¸²

Count of Palindromic Substringsï¼Œæœ€é•¿å­å­—ç¬¦ä¸²çš„ä¸ªæ•°é—®é¢˜

Minimum Deletions in a String to make it a Palindromeï¼Œæ€ä¹ˆåˆ æ‰æœ€å°‘å­—ç¬¦æ„æˆå›æ–‡

Palindromic Partitioningï¼Œæ€ä¹ˆåˆ†é…å­—ç¬¦ï¼Œå½¢æˆå›æ–‡

## 5. Longest Common Substringï¼Œæœ€é•¿å­å­—ç¬¦ä¸²ç³»åˆ—ï¼Œ13ä¸ªé¢˜

Longest Common Substringï¼Œæœ€é•¿ç›¸åŒå­ä¸²

Longest Common Subsequenceï¼Œæœ€é•¿ç›¸åŒå­åºåˆ—

Minimum Deletions & Insertions to Transform a String into anotherï¼Œå­—ç¬¦ä¸²å˜æ¢

Longest Increasing Subsequenceï¼Œæœ€é•¿ä¸Šå‡å­åºåˆ—

Maximum Sum Increasing Subsequenceï¼Œæœ€é•¿ä¸Šå‡å­åºåˆ—å’Œ

Shortest Common Super-sequenceï¼Œæœ€çŸ­è¶…çº§å­åºåˆ—

Minimum Deletions to Make a Sequence Sortedï¼Œæœ€å°‘åˆ é™¤å˜æ¢å‡ºå­åºåˆ—

Longest Repeating Subsequenceï¼Œæœ€é•¿é‡å¤å­åºåˆ—

Subsequence Pattern Matchingï¼Œå­åºåˆ—åŒ¹é…

Longest Bitonic Subsequenceï¼Œæœ€é•¿å­—èŠ‚å­åºåˆ—

Longest Alternating Subsequenceï¼Œæœ€é•¿äº¤å·®å˜æ¢å­åºåˆ—

Edit Distanceï¼Œç¼–è¾‘è·ç¦»

Strings Interleavingï¼Œäº¤ç»‡å­—ç¬¦ä¸²